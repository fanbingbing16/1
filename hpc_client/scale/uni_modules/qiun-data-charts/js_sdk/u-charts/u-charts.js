'use strict';var config={version:"v2.4.5-20221130",yAxisWidth:15,xAxisHeight:22,xAxisTextPadding:3,padding:[10,10,10,10],pixelRatio:1,rotate:!1,fontSize:13,fontColor:"#666666",dataPointShape:["circle","circle","circle","circle"],color:["#1890FF","#91CB74","#FAC858","#EE6666","#73C0DE","#3CA272","#FC8452","#9A60B4","#ea7ccc"],linearColor:["#0EE2F8","#2BDCA8","#FA7D8D","#EB88E2","#2AE3A0","#0EE2F8","#EB88E2","#6773E3","#F78A85"],pieChartLinePadding:15,pieChartTextPadding:5,titleFontSize:20,subtitleFontSize:15,toolTipPadding:3,toolTipBackground:"#000000",toolTipOpacity:.7,toolTipLineHeight:20,radarLabelTextMargin:13},assign=function(t,...e){function i(t,e){for(let a in e)t[a]=t[a]&&"[object Object]"===t[a].toString()?i(t[a],e[a]):t[a]=e[a];return t}if(null==t)throw new TypeError("[uCharts] Cannot convert undefined or null to object");return!e||0>=e.length?t:(e.forEach(e=>{t=i(t,e)}),t)},util={toFixed:function(t,e){return e=e||2,this.isFloat(t)&&(t=t.toFixed(e)),t},isFloat:function(t){return 0!=t%1},approximatelyEqual:function(t,e){return 1e-10>Math.abs(t-e)},isSameSign:function(t,e){return Math.abs(t)===t&&Math.abs(e)===e||Math.abs(t)!==t&&Math.abs(e)!==e},isSameXCoordinateArea:function(t,e){return this.isSameSign(t.x,e.x)},isCollision:function(t,e){t.end={},t.end.x=t.start.x+t.width,t.end.y=t.start.y-t.height,e.end={},e.end.x=e.start.x+e.width,e.end.y=e.start.y-e.height;var i=e.start.x>t.end.x||e.end.x<t.start.x||e.end.y>t.start.y||e.start.y<t.end.y;return!i}};function getH5Offset(t){return t.mp={changedTouches:[]},t.mp.changedTouches.push({x:t.offsetX,y:t.offsetY}),t}function hexToRgb(t,e){var i=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,i,a){return e+e+i+i+a+a}),a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i),o=parseInt(a[1],16),n=parseInt(a[2],16),r=parseInt(a[3],16);return"rgba("+o+","+n+","+r+","+e+")"}function findRange(t,e,i){if(isNaN(t))throw new Error("[uCharts] series\u6570\u636E\u9700\u4E3ANumber\u683C\u5F0F");i=i||10,e=e?e:"upper";for(var a=1;1>i;)i*=10,a*=10;for(t="upper"===e?Math.ceil(t*a):Math.floor(t*a);0!=t%i;)if("upper"===e){if(t==t+1)break;t++}else t--;return t/a}function calValidDistance(t,e,i,a,o){var n=o.width-o.area[1]-o.area[3],r=i.eachSpacing*(o.chartData.xAxisData.xAxisPoints.length-1);"mount"==o.type&&o.extra&&o.extra.mount&&o.extra.mount.widthRatio&&1<o.extra.mount.widthRatio&&(2<o.extra.mount.widthRatio&&(o.extra.mount.widthRatio=2),r+=(o.extra.mount.widthRatio-1)*i.eachSpacing);var l=e;return 0<=e?(l=0,t.uevent.trigger("scrollLeft"),t.scrollOption.position="left",o.xAxis.scrollPosition="left"):Math.abs(e)>=r-n?(l=n-r,t.uevent.trigger("scrollRight"),t.scrollOption.position="right",o.xAxis.scrollPosition="right"):(t.scrollOption.position=e,o.xAxis.scrollPosition=e),l}function isInAngleRange(t,e,i){function a(t){for(;0>t;)t+=2*Math.PI;for(;t>2*Math.PI;)t-=2*Math.PI;return t}return t=a(t),e=a(e),i=a(i),e>i&&(i+=2*Math.PI,t<e&&(t+=2*Math.PI)),t>=e&&t<=i}function createCurveControlPoints(t,e){function i(t,e){return!!(t[e-1]&&t[e+1])&&(t[e].y>=Math.max(t[e-1].y,t[e+1].y)||t[e].y<=Math.min(t[e-1].y,t[e+1].y))}function o(t,e){return!!(t[e-1]&&t[e+1])&&(t[e].x>=Math.max(t[e-1].x,t[e+1].x)||t[e].x<=Math.min(t[e-1].x,t[e+1].x))}var n=.2,a=.2,r=null,l=null,s=null,x=null;if(1>e?(r=t[0].x+(t[1].x-t[0].x)*n,l=t[0].y+(t[1].y-t[0].y)*n):(r=t[e].x+(t[e+1].x-t[e-1].x)*n,l=t[e].y+(t[e+1].y-t[e-1].y)*n),e>t.length-3){var d=t.length-1;s=t[d].x-(t[d].x-t[d-1].x)*a,x=t[d].y-(t[d].y-t[d-1].y)*a}else s=t[e+1].x-(t[e+2].x-t[e].x)*a,x=t[e+1].y-(t[e+2].y-t[e].y)*a;return i(t,e+1)&&(x=t[e+1].y),i(t,e)&&(l=t[e].y),o(t,e+1)&&(s=t[e+1].x),o(t,e)&&(r=t[e].x),(l>=Math.max(t[e].y,t[e+1].y)||l<=Math.min(t[e].y,t[e+1].y))&&(l=t[e].y),(x>=Math.max(t[e].y,t[e+1].y)||x<=Math.min(t[e].y,t[e+1].y))&&(x=t[e+1].y),(r>=Math.max(t[e].x,t[e+1].x)||r<=Math.min(t[e].x,t[e+1].x))&&(r=t[e].x),(s>=Math.max(t[e].x,t[e+1].x)||s<=Math.min(t[e].x,t[e+1].x))&&(s=t[e+1].x),{ctrA:{x:r,y:l},ctrB:{x:s,y:x}}}function convertCoordinateOrigin(t,e,i){return{x:i.x+t,y:i.y-e}}function avoidCollision(t,e){if(e)for(;util.isCollision(t,e);)0<t.start.x?t.start.y--:0>t.start.x?t.start.y++:0<t.start.y?t.start.y++:t.start.y--;return t}function fixPieSeries(t,e){let a=[];if(0<t.length&&-1<t[0].data.constructor.toString().indexOf("Array")){e._pieSeries_=t;let i=t[0].data;for(var o=0;o<i.length;o++)i[o].formatter=t[0].formatter,i[o].data=i[o].value,a.push(i[o]);e.series=a}else a=t;return a}function fillSeries(t,e,a){for(var o=0,n=0;n<t.length;n++){let i=t[n];if(i.color||(i.color=a.color[o],o=(o+1)%a.color.length),i.linearIndex||(i.linearIndex=n),i.index||(i.index=0),i.type||(i.type=e.type),"undefined"==typeof i.show&&(i.show=!0),i.type||(i.type=e.type),i.pointShape||(i.pointShape="circle"),!i.legendShape)switch(i.type){case"line":i.legendShape="line";break;case"column":case"bar":i.legendShape="rect";break;case"area":case"mount":i.legendShape="triangle";break;default:i.legendShape="circle";}}return t}function fillCustomColor(t,e,a,o){var n=e||[];if("custom"==t&&0==n.length&&(n=o.linearColor),"custom"==t&&n.length<a.length){let t=a.length-n.length;for(var r=0;r<t;r++)n.push(o.linearColor[(r+1)%o.linearColor.length])}return n}function getDataRange(t,e){var i=0,a=e-t;return i=1e4<=a?1e3:1e3<=a?100:100<=a?10:10<=a?5:1<=a?1:.1<=a?.1:.01<=a?.01:.001<=a?.001:1e-4<=a?1e-4:1e-5<=a?1e-5:1e-6,{minRange:findRange(t,"lower",i),maxRange:findRange(e,"upper",i)}}function measureText(t,e,i){var a=0;if(t+="",i=!1,!1!==i&&void 0!==i&&i.setFontSize&&i.measureText)return i.setFontSize(e),i.measureText(t).width;var t=t.split("");for(let o,n=0;n<t.length;n++)o=t[n],a+=/[a-zA-Z]/.test(o)?7:/[0-9]/.test(o)?5.5:/\./.test(o)?2.7:/-/.test(o)?3.25:/:/.test(o)?2.5:/[\u4e00-\u9fa5]/.test(o)?10:/\(|\)/.test(o)?3.73:/\s/.test(o)?2.5:/%/.test(o)?8:10;return a*e/10}function dataCombine(t){return t.reduce(function(t,e){return(t.data?t.data:t).concat(e.data)},[])}function dataCombineStack(t,e){for(var o=Array(e),n=0;n<o.length;n++)o[n]=0;for(var a=0;a<t.length;a++)for(var n=0;n<o.length;n++)o[n]+=t[a].data[n];return t.reduce(function(t,e){return(t.data?t.data:t).concat(e.data).concat(o)},[])}function getTouches(t,i,a){let e,o;return t.clientX?i.rotate?(o=i.height-t.clientX*i.pix,e=(t.pageY-a.currentTarget.offsetTop-i.height/i.pix/2*(i.pix-1))*i.pix):(e=t.clientX*i.pix,o=(t.pageY-a.currentTarget.offsetTop-i.height/i.pix/2*(i.pix-1))*i.pix):i.rotate?(o=i.height-t.x*i.pix,e=t.y*i.pix):(e=t.x*i.pix,o=t.y*i.pix),{x:e,y:o}}function getSeriesDataItem(t,e,a){var o=[],n=[],r=-1<e.constructor.toString().indexOf("Array");if(r){let e=filterSeries(t);for(var l=0;l<a.length;l++)n.push(e[a[l]])}else n=t;for(let l=0;l<n.length;l++){let t=n[l],i=-1;if(i=r?e[l]:e,null!==t.data[i]&&"undefined"!=typeof t.data[i]&&t.show){let e={};e.color=t.color,e.type=t.type,e.style=t.style,e.pointShape=t.pointShape,e.disableLegend=t.disableLegend,e.name=t.name,e.show=t.show,e.data=t.formatter?t.formatter(t.data[i]):t.data[i],o.push(e)}}return o}function getMaxTextListLength(t,e,i){var a=t.map(function(t){return measureText(t,e,i)});return Math.max.apply(null,a)}function getRadarCoordinateSeries(t){for(var e=2*Math.PI/t,a=[],o=0;o<t;o++)a.push(e*o);return a.map(function(t){return-1*t+Math.PI/2})}function getToolTipData(t,e,a,o,n){var r=5<arguments.length&&arguments[5]!==void 0?arguments[5]:{},l=e.chartData.calPoints?e.chartData.calPoints:[];let s={};if(0<o.length){let t=[];for(let e=0;e<o.length;e++)t.push(l[o[e]]);s=t[0][a[0]]}else for(let t=0;t<l.length;t++)if(l[t][a]){s=l[t][a];break}var x=t.map(function(t){let i=null;return e.categories&&0<e.categories.length&&(i=n[a]),{text:r.formatter?r.formatter(t,i,a,e):t.name+": "+t.data,color:t.color}}),d={x:Math.round(s.x),y:Math.round(s.y)};return{textList:x,offset:d}}function filterSeries(t){let e=[];for(let a=0;a<t.length;a++)!0==t[a].show&&e.push(t[a]);return e}function findCurrentIndex(t,e,a,o){var n=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,r={index:-1,group:[]},l=a.chartData.eachSpacing/2;let s=[];if(e&&0<e.length){if(!a.categories)l=0;else{for(let t=1;t<a.chartData.xAxisPoints.length;t++)s.push(a.chartData.xAxisPoints[t]-l);("line"==a.type||"area"==a.type)&&"justify"==a.xAxis.boundaryGap&&(s=a.chartData.xAxisPoints)}if(isInExactChartArea(t,a,o))if(!a.categories){let a=Array(e.length);for(let o=0;o<e.length;o++){a[o]=Array(e[o].length);for(let i=0;i<e[o].length;i++)a[o][i]=Math.abs(e[o][i].x-t.x)}let o=Array(a.length),n=Array(a.length);for(let t=0;t<a.length;t++)o[t]=Math.min.apply(null,a[t]),n[t]=a[t].indexOf(o[t]);let l=Math.min.apply(null,o);r.index=[];for(let t=0;t<o.length;t++)o[t]==l&&(r.group.push(t),r.index.push(n[t]))}else s.forEach(function(e,i){t.x+n+l>e&&(r.index=i)})}return r}function findLegendIndex(t,e){let i=-1,a=0;if(isInExactLegendArea(t,e.area)){let o=e.points,n=-1;for(let e,r=0,l=o.length;r<l;r++){e=o[r];for(let o=0;o<e.length;o++){n+=1;let r=e[o].area;if(r&&t.x>r[0]-a&&t.x<r[2]+a&&t.y>r[1]-a&&t.y<r[3]+a){i=n;break}}}return i}return i}function isInExactLegendArea(t,e){return t.x>e.start.x&&t.x<e.end.x&&t.y>e.start.y&&t.y<e.end.y}function isInExactChartArea(t,e){return t.x<=e.width-e.area[1]+10&&t.x>=e.area[3]-10&&t.y>=e.area[0]&&t.y<=e.height-e.area[2]}function findRadarChartCurrentIndex(t,e,i){var a=2*Math.PI/i,o=-1;if(isInExactPieChartArea(t,e.center,e.radius)){var n=function(t){return 0>t&&(t+=2*Math.PI),t>2*Math.PI&&(t-=2*Math.PI),t},r=Math.atan2(e.center.y-t.y,t.x-e.center.x);r=-1*r,0>r&&(r+=2*Math.PI);var l=e.angleList.map(function(t){return t=n(-1*t),t});l.forEach(function(t,e){var i=n(t-a/2),l=n(t+a/2);l<i&&(l+=2*Math.PI),(r>=i&&r<=l||r+2*Math.PI>=i&&r+2*Math.PI<=l)&&(o=e)})}return o}function findPieChartCurrentIndex(t,e,a){var o=-1,n=getPieDataPoints(e.series);if(e&&e.center&&isInExactPieChartArea(t,e.center,e.radius)){var r=Math.atan2(e.center.y-t.y,t.x-e.center.x);r=-r,a.extra.pie&&a.extra.pie.offsetAngle&&(r-=a.extra.pie.offsetAngle*Math.PI/180),a.extra.ring&&a.extra.ring.offsetAngle&&(r-=a.extra.ring.offsetAngle*Math.PI/180);for(var l=0,s=n.length;l<s;l++)if(isInAngleRange(r,n[l]._start_,n[l]._start_+2*n[l]._proportion_*Math.PI)){o=l;break}}return o}function isInExactPieChartArea(t,e,i){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(i,2)}function splitPoints(t,e){var i=[],a=[];return t.forEach(function(t){e.connectNulls?null!==t&&a.push(t):null===t?(a.length&&i.push(a),a=[]):a.push(t)}),a.length&&i.push(a),i}function calLegendData(t,e,i,a,o){let n={area:{start:{x:0,y:0},end:{x:0,y:0},width:0,height:0,wholeWidth:0,wholeHeight:0},points:[],widthArr:[],heightArr:[]};if(!1===e.legend.show)return a.legendData=n,n;let r=e.legend.padding*e.pix,l=e.legend.margin*e.pix,s=e.legend.fontSize?e.legend.fontSize*e.pix:i.fontSize,x=15*e.pix,d=5*e.pix,p=Math.max(e.legend.lineHeight*e.pix,s);if("top"==e.legend.position||"bottom"==e.legend.position){let a=[],h=0,c=[],g=[];for(let n,r=0;r<t.length;r++){n=t[r];const i=n.legendText?n.legendText:n.name;let l=x+d+measureText(i||"undefined",s,o)+e.legend.itemGap*e.pix;h+l>e.width-e.area[1]-e.area[3]?(a.push(g),c.push(h-e.legend.itemGap*e.pix),h=l,g=[n]):(h+=l,g.push(n))}if(g.length){a.push(g),c.push(h-e.legend.itemGap*e.pix),n.widthArr=c;let t=Math.max.apply(null,c);switch(e.legend.float){case"left":n.area.start.x=e.area[3],n.area.end.x=e.area[3]+t+2*r;break;case"right":n.area.start.x=e.width-e.area[1]-t-2*r,n.area.end.x=e.width-e.area[1];break;default:n.area.start.x=(e.width-t)/2-r,n.area.end.x=(e.width+t)/2+r;}n.area.width=t+2*r,n.area.wholeWidth=t+2*r,n.area.height=a.length*p+2*r,n.area.wholeHeight=a.length*p+2*r+2*l,n.points=a}}else{let i=t.length,a=e.height-e.area[0]-e.area[2]-2*l-2*r,h=Math.min(Math.floor(a/p),i);switch(n.area.height=h*p+2*r,n.area.wholeHeight=h*p+2*r,e.legend.float){case"top":n.area.start.y=e.area[0]+l,n.area.end.y=e.area[0]+l+n.area.height;break;case"bottom":n.area.start.y=e.height-e.area[2]-l-n.area.height,n.area.end.y=e.height-e.area[2]-l;break;default:n.area.start.y=(e.height-n.area.height)/2,n.area.end.y=(e.height+n.area.height)/2;}let c=0==i%h?i/h:Math.floor(i/h+1),g=[];for(let e,a=0;a<c;a++)e=t.slice(a*h,a*h+h),g.push(e);if(n.points=g,g.length){for(let t=0;t<g.length;t++){let i=g[t],a=0;for(let t,n=0;n<i.length;n++)t=x+d+measureText(i[n].name||"undefined",s,o)+e.legend.itemGap*e.pix,t>a&&(a=t);n.widthArr.push(a),n.heightArr.push(i.length*p+2*r)}let t=0;for(let e=0;e<n.widthArr.length;e++)t+=n.widthArr[e];n.area.width=t-e.legend.itemGap*e.pix+2*r,n.area.wholeWidth=n.area.width+r}}switch(e.legend.position){case"top":n.area.start.y=e.area[0]+l,n.area.end.y=e.area[0]+l+n.area.height;break;case"bottom":n.area.start.y=e.height-e.area[2]-n.area.height-l,n.area.end.y=e.height-e.area[2]-l;break;case"left":n.area.start.x=e.area[3],n.area.end.x=e.area[3]+n.area.width;break;case"right":n.area.start.x=e.width-e.area[1]-n.area.width,n.area.end.x=e.width-e.area[1];}return a.legendData=n,n}function calCategoriesData(t,e,i,a,o){var n={angle:0,xAxisHeight:i.xAxisHeight},r=e.xAxis.fontSize*e.pix||i.fontSize,l=t.map(function(t,i){var a=e.xAxis.formatter?e.xAxis.formatter(t,i,e):t;return measureText(a+"",r,o)}),s=Math.max.apply(this,l);if(!0==e.xAxis.rotateLabel){n.angle=e.xAxis.rotateAngle*Math.PI/180;let t=2*i.xAxisTextPadding+Math.abs(s*Math.sin(n.angle));t=t<r+2*i.xAxisTextPadding?t+2*i.xAxisTextPadding:t,!0==e.enableScroll&&!0==e.xAxis.scrollShow&&(t+=12*e.pix),n.xAxisHeight=t}return e.xAxis.disabled&&(n.xAxisHeight=0),n}function getXAxisTextList(t,e,a,o){var n,r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:-1;n="stack"==o?dataCombineStack(t,e.categories.length):dataCombine(t);var l=[];n=n.filter(function(t){return"object"==typeof t&&null!==t?-1<t.constructor.toString().indexOf("Array")?null!==t:null!==t.value:null!==t}),n.map(function(t){"object"==typeof t?-1<t.constructor.toString().indexOf("Array")?"candle"==e.type?t.map(function(t){l.push(t)}):l.push(t[0]):l.push(t.value):l.push(t)});var s=0,x=0;if(0<l.length&&(s=Math.min.apply(this,l),x=Math.max.apply(this,l)),-1<r?("number"==typeof e.xAxis.data[r].min&&(s=Math.min(e.xAxis.data[r].min,s)),"number"==typeof e.xAxis.data[r].max&&(x=Math.max(e.xAxis.data[r].max,x))):("number"==typeof e.xAxis.min&&(s=Math.min(e.xAxis.min,s)),"number"==typeof e.xAxis.max&&(x=Math.max(e.xAxis.max,x))),s===x){var d=x||10;x+=d}for(var p=s,h=x,c=[],g=(h-p)/e.xAxis.splitNumber,y=0;y<=e.xAxis.splitNumber;y++)c.push(p+g*y);return c}function calXAxisData(t,e,i,a){var o=assign({},{type:""},e.extra.bar),n={angle:0,xAxisHeight:i.xAxisHeight};n.ranges=getXAxisTextList(t,e,i,o.type),n.rangesFormat=n.ranges.map(function(t){return t=util.toFixed(t,2),t});var r=n.ranges.map(function(t){return t=util.toFixed(t,2),t});n=Object.assign(n,getXAxisPoints(r,e,i));var l=n.eachSpacing,s=r.map(function(t){return measureText(t,e.xAxis.fontSize*e.pix||i.fontSize,a)}),x=Math.max.apply(this,s);return x+2*i.xAxisTextPadding>l&&(n.angle=45*Math.PI/180,n.xAxisHeight=2*i.xAxisTextPadding+x*Math.sin(n.angle)),!0===e.xAxis.disabled&&(n.xAxisHeight=0),n}function getRadarDataPoints(t,e,i,a,o){var n=5<arguments.length&&arguments[5]!==void 0?arguments[5]:1,r=o.extra.radar||{};r.max=r.max||0;var l=Math.max(r.max,Math.max.apply(null,dataCombine(a))),s=[];for(let r=0;r<a.length;r++){let o=a[r],x={};x.color=o.color,x.legendShape=o.legendShape,x.pointShape=o.pointShape,x.data=[],o.data.forEach(function(a,o){let r={};r.angle=t[o],r.proportion=a/l,r.value=a,r.position=convertCoordinateOrigin(i*r.proportion*n*Math.cos(r.angle),i*r.proportion*n*Math.sin(r.angle),e),x.data.push(r)}),s.push(x)}return s}function getPieDataPoints(t,e){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,o=0,n=0;for(let a,n=0;n<t.length;n++)a=t[n],a.data=null===a.data?0:a.data,o+=a.data;for(let n,r=0;r<t.length;r++)n=t[r],n.data=null===n.data?0:n.data,n._proportion_=0===o?1/t.length*a:n.data/o*a,n._radius_=e;for(let a,o=0;o<t.length;o++)a=t[o],a._start_=n,n+=2*a._proportion_*Math.PI;return t}function getArcbarDataPoints(t,e){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1;1==a&&(a=.999999);for(let o,n=0;n<t.length;n++){o=t[n],o.data=null===o.data?0:o.data;let i;i="circle"==e.type?2:"ccw"==e.direction?e.startAngle<e.endAngle?2+e.startAngle-e.endAngle:e.startAngle-e.endAngle:e.endAngle<e.startAngle?2+e.endAngle-e.startAngle:e.startAngle-e.endAngle,o._proportion_=i*o.data*a+e.startAngle,"ccw"==e.direction&&(o._proportion_=e.startAngle-i*o.data*a),2<=o._proportion_&&(o._proportion_%=2)}return t}function getPieTextMaxLength(t,e,a,o){t=getPieDataPoints(t);let n=0;for(let r=0;r<t.length;r++){let i=t[r],l=i.formatter?i.formatter(+i._proportion_.toFixed(2)):util.toFixed(100*i._proportion_)+"%";n=Math.max(n,measureText(l,i.textSize*o.pix||e.fontSize,a))}return n}function fixColumeData(t,e,i,a,o,n){return t.map(function(t){if(null===t)return null;var o=0,r=0;return"mix"==n.type?(o=n.extra.mix.column.seriesGap*n.pix||0,r=n.extra.mix.column.categoryGap*n.pix||0):(o=n.extra.column.seriesGap*n.pix||0,r=n.extra.column.categoryGap*n.pix||0),o=Math.min(o,e/i),r=Math.min(r,e/i),t.width=Math.ceil((e-2*r-o*(i-1))/i),n.extra.mix&&n.extra.mix.column.width&&0<+n.extra.mix.column.width&&(t.width=Math.min(t.width,+n.extra.mix.column.width*n.pix)),n.extra.column&&n.extra.column.width&&0<+n.extra.column.width&&(t.width=Math.min(t.width,+n.extra.column.width*n.pix)),0>=t.width&&(t.width=1),t.x+=(a+.5-i/2)*(t.width+o),t})}function fixColumeMeterData(t,e,i,a,o,n,r){var l=n.extra.column.categoryGap*n.pix||0;return t.map(function(t){return null===t?null:(t.width=e-2*l,n.extra.column&&n.extra.column.width&&0<+n.extra.column.width&&(t.width=Math.min(t.width,+n.extra.column.width*n.pix)),0<a&&(t.width-=r),t)})}function fixColumeStackData(t,e,i,a,o,n){var r=n.extra.column.categoryGap*n.pix||0;return t.map(function(t){return null===t?null:(t.width=Math.ceil(e-2*r),n.extra.column&&n.extra.column.width&&0<+n.extra.column.width&&(t.width=Math.min(t.width,+n.extra.column.width*n.pix)),0>=t.width&&(t.width=1),t)})}function getXAxisPoints(t,e){var i=e.width-e.area[1]-e.area[3],a=e.enableScroll?Math.min(e.xAxis.itemCount,t.length):t.length;("line"==e.type||"area"==e.type||"scatter"==e.type||"bubble"==e.type||"bar"==e.type)&&1<a&&"justify"==e.xAxis.boundaryGap&&(a-=1);var o=0;"mount"==e.type&&e.extra&&e.extra.mount&&e.extra.mount.widthRatio&&1<e.extra.mount.widthRatio&&(2<e.extra.mount.widthRatio&&(e.extra.mount.widthRatio=2),o=e.extra.mount.widthRatio-1,a+=o);var n=i/a,r=[],l=e.area[3],s=e.width-e.area[1];return t.forEach(function(t,e){r.push(l+o/2*n+e*n)}),"justify"!==e.xAxis.boundaryGap&&(!0===e.enableScroll?r.push(l+o*n+t.length*n):r.push(s)),{xAxisPoints:r,startX:l,endX:s,eachSpacing:n}}function getDataPoints(t,e,i,a,o,n){var r=7<arguments.length&&void 0!==arguments[7]?arguments[7]:1,l="center";("line"==n.type||"area"==n.type||"scatter"==n.type||"bubble"==n.type)&&(l=n.xAxis.boundaryGap);var s=[],x=n.height-n.area[0]-n.area[2],d=n.width-n.area[1]-n.area[3];return t.forEach(function(t,p){if(null===t)s.push(null);else{var h={color:t.color,x:a[p]},c=t;if("object"==typeof t&&null!==t)if(-1<t.constructor.toString().indexOf("Array")){let e,i,a;e=[].concat(n.chartData.xAxisData.ranges),i=e.shift(),a=e.pop(),c=t[1],h.x=n.area[3]+d*(t[0]-i)/(a-i),"bubble"==n.type&&(h.r=t[2],h.t=t[3])}else c=t.value;"center"==l&&(h.x+=o/2);var g=x*(c-e)/(i-e);g*=r,h.y=n.height-g-n.area[2],s.push(h)}}),s}function getStackDataPoints(t,e,i,a,o,n,r,l,s){var x=9<arguments.length&&void 0!==arguments[9]?arguments[9]:1,d=[],p=n.height-n.area[0]-n.area[2];return t.forEach(function(t,r){if(null===t)d.push(null);else{var h={color:t.color,x:a[r]+Math.round(o/2)};if(0<l){var c=0;for(let t=0;t<=l;t++)c+=s[t].data[r];var g=c-t,y=p*(c-e)/(i-e),f=p*(g-e)/(i-e)}else{var c=t;"object"==typeof t&&null!==t&&(c=t.value);var y=p*(c-e)/(i-e),f=0}var u=f;y*=x,u*=x,h.y=n.height-Math.round(y)-n.area[2],h.y0=n.height-Math.round(u)-n.area[2],d.push(h)}}),d}function getYAxisTextList(t,e,a,o,n){var r,l=5<arguments.length&&arguments[5]!==void 0?arguments[5]:-1;r="stack"==o?dataCombineStack(t,e.categories.length):dataCombine(t);var s=[];r=r.filter(function(t){return"object"==typeof t&&null!==t?-1<t.constructor.toString().indexOf("Array")?null!==t:null!==t.value:null!==t}),r.map(function(t){"object"==typeof t?-1<t.constructor.toString().indexOf("Array")?"candle"==e.type?t.map(function(t){s.push(t)}):s.push(t[1]):s.push(t.value):s.push(t)});var x=n.min||0,d=n.max||0;0<s.length&&(x=Math.min.apply(this,s),d=Math.max.apply(this,s)),x===d&&(0==d?d=10:x=0);for(var p=getDataRange(x,d),h=n.min===void 0||null===n.min?p.minRange:n.min,c=n.max===void 0||null===n.max?p.maxRange:n.max,g=(c-h)/e.yAxis.splitNumber,y=[],f=0;f<=e.yAxis.splitNumber;f++)y.push(h+g*f);return y.reverse()}function calYAxisData(t,e,a,o){var n=assign({},{type:""},e.extra.column),r=e.yAxis.data.length,l=Array(r);if(0<r){for(let e=0;e<r;e++){l[e]=[];for(let i=0;i<t.length;i++)t[i].index==e&&l[e].push(t[i])}var s=Array(r),x=Array(r),d=Array(r);for(let t,p=0;p<r;p++){t=e.yAxis.data[p],!0==e.yAxis.disabled&&(t.disabled=!0),"categories"===t.type?(!t.formatter&&(t.formatter=e=>e+(t.unit||"")),t.categories=t.categories||e.categories,s[p]=t.categories):(!t.formatter&&(t.formatter=e=>util.toFixed(e,t.tofix||0)+(t.unit||"")),s[p]=getYAxisTextList(l[p],e,a,n.type,t,p));let i=t.fontSize*e.pix||a.fontSize;d[p]={position:t.position?t.position:"left",width:0},x[p]=s[p].map(function(a,n){return a=t.formatter(a,n,e),d[p].width=Math.max(d[p].width,measureText(a,i,o)+5),a});let r=t.calibration?4*e.pix:0;d[p].width+=r+3*e.pix,!0===t.disabled&&(d[p].width=0)}}else{var s=[,],x=[,],d=[,];"bar"===e.type?(s[0]=e.categories,!e.yAxis.formatter&&(e.yAxis.formatter=(t,e,i)=>t+(i.yAxis.unit||""))):(!e.yAxis.formatter&&(e.yAxis.formatter=(t,e,i)=>t.toFixed(i.yAxis.tofix)+(i.yAxis.unit||"")),s[0]=getYAxisTextList(t,e,a,n.type,{})),d[0]={position:"left",width:0};var p=e.yAxis.fontSize*e.pix||a.fontSize;x[0]=s[0].map(function(t,i){return t=e.yAxis.formatter(t,i,e),d[0].width=Math.max(d[0].width,measureText(t,p,o)+5),t}),d[0].width+=3*e.pix,!0===e.yAxis.disabled?(d[0]={position:"left",width:0},e.yAxis.data[0]={disabled:!0}):(e.yAxis.data[0]={disabled:!1,position:"left",max:e.yAxis.max,min:e.yAxis.min,formatter:e.yAxis.formatter},"bar"===e.type&&(e.yAxis.data[0].categories=e.categories,e.yAxis.data[0].type="categories"))}return{rangesFormat:x,ranges:s,yAxisWidth:d}}function calTooltipYAxisData(t,e,a){let o=[].concat(a.chartData.yAxisData.ranges),n=a.height-a.area[0]-a.area[2],r=a.area[0],l=[];for(let s=0;s<o.length;s++){let e=Math.max.apply(this,o[s]),i=Math.min.apply(this,o[s]),x=e-(e-i)*(t-r)/n;x=a.yAxis.data&&a.yAxis.data[s].formatter?a.yAxis.data[s].formatter(x,s,a):x.toFixed(0),l.push(x+"")}return l}function calMarkLineData(t,e){let a,o,n=e.height-e.area[0]-e.area[2];for(let r=0;r<t.length;r++){t[r].yAxisIndex=t[r].yAxisIndex?t[r].yAxisIndex:0;let i=[].concat(e.chartData.yAxisData.ranges[t[r].yAxisIndex]);a=i.pop(),o=i.shift();let l=n*(t[r].value-a)/(o-a);t[r].y=e.height-Math.round(l)-e.area[2]}return t}function contextRotate(t,e){!0===e.rotateLock?!0!==e._rotate_&&(t.translate(e.height,0),t.rotate(90*Math.PI/180),e._rotate_=!0):(t.translate(e.height,0),t.rotate(90*Math.PI/180))}function drawPointShape(t,e,i,a,o){if(a.beginPath(),"hollow"==o.dataPointShapeType?(a.setStrokeStyle(e),a.setFillStyle(o.background),a.setLineWidth(2*o.pix)):(a.setStrokeStyle("#ffffff"),a.setFillStyle(e),a.setLineWidth(1*o.pix)),"diamond"===i)t.forEach(function(t){null!==t&&(a.moveTo(t.x,t.y-4.5),a.lineTo(t.x-4.5,t.y),a.lineTo(t.x,t.y+4.5),a.lineTo(t.x+4.5,t.y),a.lineTo(t.x,t.y-4.5))});else if("circle"===i)t.forEach(function(t){null!==t&&(a.moveTo(t.x+2.5*o.pix,t.y),a.arc(t.x,t.y,3*o.pix,0,2*Math.PI,!1))});else if("square"===i)t.forEach(function(t){null!==t&&(a.moveTo(t.x-3.5,t.y-3.5),a.rect(t.x-3.5,t.y-3.5,7,7))});else if("triangle"===i)t.forEach(function(t){null!==t&&(a.moveTo(t.x,t.y-4.5),a.lineTo(t.x-4.5,t.y+4.5),a.lineTo(t.x+4.5,t.y+4.5),a.lineTo(t.x,t.y-4.5))});else if("none"===i)return;a.closePath(),a.fill(),a.stroke()}function drawActivePoint(t,e,i,a,o,n){if(o.tooltip){if(a.beginPath(),"hollow"==n.activeType?(a.setStrokeStyle(e),a.setFillStyle(o.background),a.setLineWidth(2*o.pix)):(a.setStrokeStyle("#ffffff"),a.setFillStyle(e),a.setLineWidth(1*o.pix)),"diamond"===i)t.forEach(function(t,e){null!==t&&o.tooltip.index==e&&(a.moveTo(t.x,t.y-4.5),a.lineTo(t.x-4.5,t.y),a.lineTo(t.x,t.y+4.5),a.lineTo(t.x+4.5,t.y),a.lineTo(t.x,t.y-4.5))});else if("circle"===i)t.forEach(function(t,e){null!==t&&o.tooltip.index==e&&(a.moveTo(t.x+2.5*o.pix,t.y),a.arc(t.x,t.y,3*o.pix,0,2*Math.PI,!1))});else if("square"===i)t.forEach(function(t,e){null!==t&&o.tooltip.index==e&&(a.moveTo(t.x-3.5,t.y-3.5),a.rect(t.x-3.5,t.y-3.5,7,7))});else if("triangle"===i)t.forEach(function(t,e){null!==t&&o.tooltip.index==e&&(a.moveTo(t.x,t.y-4.5),a.lineTo(t.x-4.5,t.y+4.5),a.lineTo(t.x+4.5,t.y+4.5),a.lineTo(t.x,t.y-4.5))});else if("none"===i)return;a.closePath(),a.fill(),a.stroke()}}function drawRingTitle(t,e,i,a){var o=t.title.fontSize||e.titleFontSize,n=t.subtitle.fontSize||e.subtitleFontSize,r=t.title.name||"",l=t.subtitle.name||"",s=t.title.color||t.fontColor,x=t.subtitle.color||t.fontColor,d=r?o:0,p=l?n:0,h=5;if(l){var c=measureText(l,n*t.pix,i),g=a.x-c/2+(t.subtitle.offsetX||0)*t.pix,y=a.y+n*t.pix/2+(t.subtitle.offsetY||0)*t.pix;r&&(y+=(d*t.pix+h)/2),i.beginPath(),i.setFontSize(n*t.pix),i.setFillStyle(x),i.fillText(l,g,y),i.closePath(),i.stroke()}if(r){var f=measureText(r,o*t.pix,i),u=a.x-f/2+(t.title.offsetX||0),m=a.y+o*t.pix/2+(t.title.offsetY||0)*t.pix;l&&(m-=(p*t.pix+h)/2),i.beginPath(),i.setFontSize(o*t.pix),i.setFillStyle(s),i.fillText(r,u,m),i.closePath(),i.stroke()}}function drawPointText(t,e,i,a,o){var n=e.data,r=e.textOffset?e.textOffset:0;t.forEach(function(t,l){if(null!==t){a.beginPath();var s=e.textSize?e.textSize*o.pix:i.fontSize;a.setFontSize(s),a.setFillStyle(e.textColor||o.fontColor);var x=n[l];"object"==typeof n[l]&&null!==n[l]&&(-1<n[l].constructor.toString().indexOf("Array")?x=n[l][1]:x=n[l].value);var d=e.formatter?e.formatter(x,l,e,o):x;a.setTextAlign("center"),a.fillText(d+"",t.x,t.y-4+r*o.pix),a.closePath(),a.stroke(),a.setTextAlign("left")}})}function drawMountPointText(t,e,i,a,o){var n=e.data,r=e.textOffset?e.textOffset:0;t.forEach(function(t,n){if(null!==t){a.beginPath();var l=e[n].textSize?e[n].textSize*o.pix:i.fontSize;a.setFontSize(l),a.setFillStyle(e[n].textColor||o.fontColor);var s=t.value,x=e[n].formatter?e[n].formatter(s,n,e,o):s;a.setTextAlign("center"),a.fillText(x+"",t.x,t.y-4+r*o.pix),a.closePath(),a.stroke(),a.setTextAlign("left")}})}function drawRadarLabel(t,e,i,a,o,n){var r=a.extra.radar||{};t.forEach(function(t,l){if(!0===r.labelPointShow&&""!==a.categories[l]){var s={x:e*Math.cos(t),y:e*Math.sin(t)},x=convertCoordinateOrigin(s.x,s.y,i);n.setFillStyle(r.labelPointColor),n.beginPath(),n.arc(x.x,x.y,r.labelPointRadius*a.pix,0,2*Math.PI,!1),n.closePath(),n.fill()}var d={x:(e+o.radarLabelTextMargin*a.pix)*Math.cos(t),y:(e+o.radarLabelTextMargin*a.pix)*Math.sin(t)},p=convertCoordinateOrigin(d.x,d.y,i),h=p.x,c=p.y;util.approximatelyEqual(d.x,0)?h-=measureText(a.categories[l]||"",o.fontSize,n)/2:0>d.x&&(h-=measureText(a.categories[l]||"",o.fontSize,n)),n.beginPath(),n.setFontSize(o.fontSize),n.setFillStyle(r.labelColor||a.fontColor),n.fillText(a.categories[l]||"",h,c+o.fontSize/2),n.closePath(),n.stroke()})}function drawPieText(t,e,a,o,n,r){var l=a.pieChartLinePadding,s=[],x=null,d=t.map(function(i,a){var o=i.formatter?i.formatter(i,a,t,e):util.toFixed(100*i._proportion_.toFixed(4))+"%";o=i.labelText?i.labelText:o;var n=2*Math.PI-(i._start_+2*Math.PI*i._proportion_/2);i._rose_proportion_&&(n=2*Math.PI-(i._start_+2*Math.PI*i._rose_proportion_/2));var r=i.color,l=i._radius_;return{arc:n,text:o,color:r,radius:l,textColor:i.textColor,textSize:i.textSize,labelShow:i.labelShow}});for(let p=0;p<d.length;p++){let t=d[p],i=Math.cos(t.arc)*(t.radius+l),n=Math.sin(t.arc)*(t.radius+l),r=Math.cos(t.arc)*t.radius,h=Math.sin(t.arc)*t.radius,c=0<=i?i+a.pieChartTextPadding:i-a.pieChartTextPadding,g=n,y=measureText(t.text,t.textSize*e.pix||a.fontSize,o),f=g;x&&util.isSameXCoordinateArea(x.start,{x:c})&&(0<c?f=Math.min(g,x.start.y):0>i?f=Math.max(g,x.start.y):0<g?f=Math.max(g,x.start.y):f=Math.min(g,x.start.y)),0>c&&(c-=y);let u={lineStart:{x:r,y:h},lineEnd:{x:i,y:n},start:{x:c,y:f},width:y,height:a.fontSize,text:t.text,color:t.color,textColor:t.textColor,textSize:t.textSize};x=avoidCollision(u,x),s.push(x)}for(let l=0;l<s.length;l++){if(!1===d[l].labelShow)continue;let t=s[l],i=convertCoordinateOrigin(t.lineStart.x,t.lineStart.y,r),n=convertCoordinateOrigin(t.lineEnd.x,t.lineEnd.y,r),x=convertCoordinateOrigin(t.start.x,t.start.y,r);o.setLineWidth(1*e.pix),o.setFontSize(t.textSize*e.pix||a.fontSize),o.beginPath(),o.setStrokeStyle(t.color),o.setFillStyle(t.color),o.moveTo(i.x,i.y);let p=0>t.start.x?x.x+t.width:x.x,h=0>t.start.x?x.x-5:x.x+5;o.quadraticCurveTo(n.x,n.y,p,x.y),o.moveTo(i.x,i.y),o.stroke(),o.closePath(),o.beginPath(),o.moveTo(x.x+t.width,x.y),o.arc(p,x.y,2*e.pix,0,2*Math.PI),o.closePath(),o.fill(),o.beginPath(),o.setFontSize(t.textSize*e.pix||a.fontSize),o.setFillStyle(t.textColor||e.fontColor),o.fillText(t.text,h,x.y+3),o.closePath(),o.stroke(),o.closePath()}}function drawToolTipSplitLine(t,e,i,a){var o=e.extra.tooltip||{};o.gridType=null==o.gridType?"solid":o.gridType,o.dashLength=null==o.dashLength?4:o.dashLength;var n=e.area[0],r=e.height-e.area[2];if("dash"==o.gridType&&a.setLineDash([o.dashLength,o.dashLength]),a.setStrokeStyle(o.gridColor||"#cccccc"),a.setLineWidth(1*e.pix),a.beginPath(),a.moveTo(t,n),a.lineTo(t,r),a.stroke(),a.setLineDash([]),o.xAxisLabel){let n=e.categories[e.tooltip.index];a.setFontSize(i.fontSize);let l=measureText(n,i.fontSize,a),s=t-.5*l,x=r+2*e.pix;a.beginPath(),a.setFillStyle(hexToRgb(o.labelBgColor||i.toolTipBackground,o.labelBgOpacity||i.toolTipOpacity)),a.setStrokeStyle(o.labelBgColor||i.toolTipBackground),a.setLineWidth(1*e.pix),a.rect(s-i.toolTipPadding,x,l+2*i.toolTipPadding,i.fontSize+2*i.toolTipPadding),a.closePath(),a.stroke(),a.fill(),a.beginPath(),a.setFontSize(i.fontSize),a.setFillStyle(o.labelFontColor||e.fontColor),a.fillText(n+"",s,x+i.toolTipPadding+i.fontSize),a.closePath(),a.stroke()}}function drawMarkLine(t,e,a){let o=assign({},{type:"solid",dashLength:4,data:[]},t.extra.markLine),n=t.area[3],r=t.width-t.area[1],l=calMarkLineData(o.data,t);for(let s,x=0;x<l.length;x++)if(s=assign({},{lineColor:"#DE4A42",showLabel:!1,labelFontColor:"#666666",labelBgColor:"#DFE8FF",labelBgOpacity:.8,labelAlign:"left",labelOffsetX:0,labelOffsetY:0},l[x]),"dash"==o.type&&a.setLineDash([o.dashLength,o.dashLength]),a.setStrokeStyle(s.lineColor),a.setLineWidth(1*t.pix),a.beginPath(),a.moveTo(n,s.y),a.lineTo(r,s.y),a.stroke(),a.setLineDash([]),s.showLabel){let i=s.labelText?s.labelText:s.value;a.setFontSize(e.fontSize);let o=measureText(i,e.fontSize,a),n=o+2*e.toolTipPadding,r="left"==s.labelAlign?t.area[3]-n:t.width-t.area[1];r+=s.labelOffsetX;let l=s.y-.5*e.fontSize-e.toolTipPadding;l+=s.labelOffsetY;let x=r+e.toolTipPadding,d=s.y;a.setFillStyle(hexToRgb(s.labelBgColor,s.labelBgOpacity)),a.setStrokeStyle(s.labelBgColor),a.setLineWidth(1*t.pix),a.beginPath(),a.rect(r,l,n,e.fontSize+2*e.toolTipPadding),a.closePath(),a.stroke(),a.fill(),a.setFontSize(e.fontSize),a.setTextAlign("left"),a.setFillStyle(s.labelFontColor),a.fillText(i+"",x,l+e.fontSize+e.toolTipPadding/2),a.stroke(),a.setTextAlign("left")}}function drawToolTipHorizentalLine(t,e,a,o){var n=assign({},{gridType:"solid",dashLength:4},t.extra.tooltip),r=t.area[3],l=t.width-t.area[1];if("dash"==n.gridType&&a.setLineDash([n.dashLength,n.dashLength]),a.setStrokeStyle(n.gridColor||"#cccccc"),a.setLineWidth(1*t.pix),a.beginPath(),a.moveTo(r,t.tooltip.offset.y),a.lineTo(l,t.tooltip.offset.y),a.stroke(),a.setLineDash([]),n.yAxisLabel){let r=calTooltipYAxisData(t.tooltip.offset.y,t.series,t,e,o),l=t.chartData.yAxisData.yAxisWidth,s=t.area[3],x=t.width-t.area[1];for(let o=0;o<r.length;o++){a.setFontSize(e.fontSize);let i,d,p,h=measureText(r[o],e.fontSize,a);"left"==l[o].position?(i=s-(h+2*e.toolTipPadding)-2*t.pix,d=Math.max(i,i+h+2*e.toolTipPadding)):(i=x+2*t.pix,d=Math.max(i+l[o].width,i+h+2*e.toolTipPadding)),p=d-i;let c=i+(p-h)/2,g=t.tooltip.offset.y;a.beginPath(),a.setFillStyle(hexToRgb(n.labelBgColor||e.toolTipBackground,n.labelBgOpacity||e.toolTipOpacity)),a.setStrokeStyle(n.labelBgColor||e.toolTipBackground),a.setLineWidth(1*t.pix),a.rect(i,g-.5*e.fontSize-e.toolTipPadding,p,e.fontSize+2*e.toolTipPadding),a.closePath(),a.stroke(),a.fill(),a.beginPath(),a.setFontSize(e.fontSize),a.setFillStyle(n.labelFontColor||t.fontColor),a.fillText(r[o],c,g+.5*e.fontSize),a.closePath(),a.stroke(),"left"==l[o].position?s-=l[o].width+t.yAxis.padding*t.pix:x+=l[o].width+t.yAxis.padding*t.pix}}}function drawToolTipSplitArea(t,e,i,a,o){var n=assign({},{activeBgColor:"#000000",activeBgOpacity:.08,activeWidth:o},e.extra.column);n.activeWidth=n.activeWidth>o?o:n.activeWidth;var r=e.area[0],l=e.height-e.area[2];a.beginPath(),a.setFillStyle(hexToRgb(n.activeBgColor,n.activeBgOpacity)),a.rect(t-n.activeWidth/2,r,n.activeWidth,l-r),a.closePath(),a.fill(),a.setFillStyle("#FFFFFF")}function drawToolTip(t,e,i,a,o){var n=assign({},{showBox:!0,showArrow:!0,showCategory:!1,bgColor:"#000000",bgOpacity:.7,borderColor:"#000000",borderWidth:0,borderRadius:0,borderOpacity:.7,fontColor:"#FFFFFF",splitLine:!0},i.extra.tooltip);!0==n.showCategory&&i.categories&&t.unshift({text:i.categories[i.tooltip.index],color:null});var r=4*i.pix,l=5*i.pix,s=n.showArrow?8*i.pix:0,x=!1;("line"==i.type||"mount"==i.type||"area"==i.type||"candle"==i.type||"mix"==i.type)&&!0==n.splitLine&&drawToolTipSplitLine(i.tooltip.offset.x,i,a,o),e=assign({x:0,y:0},e),e.y-=8*i.pix;var d=t.map(function(t){return measureText(t.text,a.fontSize,o)}),p=r+l+4*a.toolTipPadding+Math.max.apply(null,d),h=2*a.toolTipPadding+t.length*a.toolTipLineHeight;if(!1!=n.showBox){e.x-Math.abs(i._scrollDistance_||0)+s+p>i.width&&(x=!0),h+e.y>i.height&&(e.y=i.height-h),o.beginPath(),o.setFillStyle(hexToRgb(n.bgColor||a.toolTipBackground,n.bgOpacity||a.toolTipOpacity)),o.setLineWidth(n.borderWidth*i.pix),o.setStrokeStyle(hexToRgb(n.borderColor,n.borderOpacity));var c=n.borderRadius;x?(p+s>i.width&&(e.x=i.width+Math.abs(i._scrollDistance_||0)+s+(p-i.width)),p>e.x&&(e.x=i.width+Math.abs(i._scrollDistance_||0)+s+(p-i.width)),n.showArrow&&(o.moveTo(e.x,e.y+10*i.pix),o.lineTo(e.x-s,e.y+10*i.pix+5*i.pix)),o.arc(e.x-s-c,e.y+h-c,c,0,Math.PI/2,!1),o.arc(e.x-s-Math.round(p)+c,e.y+h-c,c,Math.PI/2,Math.PI,!1),o.arc(e.x-s-Math.round(p)+c,e.y+c,c,-Math.PI,-Math.PI/2,!1),o.arc(e.x-s-c,e.y+c,c,-Math.PI/2,0,!1),n.showArrow&&(o.lineTo(e.x-s,e.y+10*i.pix-5*i.pix),o.lineTo(e.x,e.y+10*i.pix))):(n.showArrow&&(o.moveTo(e.x,e.y+10*i.pix),o.lineTo(e.x+s,e.y+10*i.pix-5*i.pix)),o.arc(e.x+s+c,e.y+c,c,-Math.PI,-Math.PI/2,!1),o.arc(e.x+s+Math.round(p)-c,e.y+c,c,-Math.PI/2,0,!1),o.arc(e.x+s+Math.round(p)-c,e.y+h-c,c,0,Math.PI/2,!1),o.arc(e.x+s+c,e.y+h-c,c,Math.PI/2,Math.PI,!1),n.showArrow&&(o.lineTo(e.x+s,e.y+10*i.pix+5*i.pix),o.lineTo(e.x,e.y+10*i.pix))),o.closePath(),o.fill(),0<n.borderWidth&&o.stroke(),t.forEach(function(t,i){if(null!==t.color){o.beginPath(),o.setFillStyle(t.color);var n=e.x+s+2*a.toolTipPadding,l=e.y+(a.toolTipLineHeight-a.fontSize)/2+a.toolTipLineHeight*i+a.toolTipPadding+1;x&&(n=e.x-p-s+2*a.toolTipPadding),o.fillRect(n,l,r,a.fontSize),o.closePath(),o.fill()}}),t.forEach(function(t,i){var d=e.x+s+2*a.toolTipPadding+r+l;x&&(d=e.x-p-s+2*a.toolTipPadding+ +r+l);var h=e.y+(a.toolTipLineHeight-a.fontSize)/2+a.toolTipLineHeight*i+a.toolTipPadding;o.beginPath(),o.setFontSize(a.fontSize),o.setFillStyle(n.fontColor),o.fillText(t.text,d,h+a.fontSize),o.closePath(),o.stroke()})}}function drawColumnDataPoints(t,e,i,a){let o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1,n=e.chartData.xAxisData,r=n.xAxisPoints,l=n.eachSpacing,s=assign({},{type:"group",width:l/2,meterBorder:4,meterFillColor:"#FFFFFF",barBorderCircle:!1,barBorderRadius:[],seriesGap:2,linearType:"none",linearOpacity:1,customColor:[],colorStop:0},e.extra.column),x=[];a.save();let d=-2,p=r.length+2;return e._scrollDistance_&&0!==e._scrollDistance_&&!0===e.enableScroll&&(a.translate(e._scrollDistance_,0),d=Math.floor(-e._scrollDistance_/l)-2,p=d+e.xAxis.itemCount+4),e.tooltip&&e.tooltip.textList&&e.tooltip.textList.length&&1===o&&drawToolTipSplitArea(e.tooltip.offset.x,e,i,a,l),s.customColor=fillCustomColor(s.linearType,s.customColor,t,i),t.forEach(function(n,h){let c,g,y;c=[].concat(e.chartData.yAxisData.ranges[n.index]),g=c.pop(),y=c.shift();var f=n.data;switch(s.type){case"group":var u=getDataPoints(f,g,y,r,l,e,i,o),m=getStackDataPoints(f,g,y,r,l,e,i,h,t,o);x.push(m),u=fixColumeData(u,l,t.length,h,i,e);for(let t,o=0;o<u.length;o++)if(t=u[o],null!==t&&o>d&&o<p){var A=t.x-t.width/2,S=e.height-t.y-e.area[2];a.beginPath();var b=t.color||n.color,T=t.color||n.color;if("none"!==s.linearType){var P=a.createLinearGradient(A,t.y,A,e.height-e.area[2]);"opacity"==s.linearType?(P.addColorStop(0,hexToRgb(b,s.linearOpacity)),P.addColorStop(1,hexToRgb(b,1))):(P.addColorStop(0,hexToRgb(s.customColor[n.linearIndex],s.linearOpacity)),P.addColorStop(s.colorStop,hexToRgb(s.customColor[n.linearIndex],s.linearOpacity)),P.addColorStop(1,hexToRgb(b,1))),b=P}if(s.barBorderRadius&&4===s.barBorderRadius.length||!0===s.barBorderCircle){const i=A,o=t.y,n=t.width,r=e.height-e.area[2]-t.y;s.barBorderCircle&&(s.barBorderRadius=[n/2,n/2,0,0]);let[l,x,d,p]=s.barBorderRadius,h=Math.min(n/2,r/2);l=l>h?h:l,x=x>h?h:x,d=d>h?h:d,p=p>h?h:p,l=0>l?0:l,x=0>x?0:x,d=0>d?0:d,p=0>p?0:p,a.arc(i+l,o+l,l,-Math.PI,-Math.PI/2),a.arc(i+n-x,o+x,x,-Math.PI/2,0),a.arc(i+n-d,o+r-d,d,0,Math.PI/2),a.arc(i+p,o+r-p,p,Math.PI/2,Math.PI)}else a.moveTo(A,t.y),a.lineTo(A+t.width,t.y),a.lineTo(A+t.width,e.height-e.area[2]),a.lineTo(A,e.height-e.area[2]),a.lineTo(A,t.y),a.setLineWidth(1),a.setStrokeStyle(T);a.setFillStyle(b),a.closePath(),a.fill()};break;case"stack":var u=getStackDataPoints(f,g,y,r,l,e,i,h,t,o);x.push(u),u=fixColumeStackData(u,l,t.length,h,i,e,t);for(let t,o=0;o<u.length;o++)if(t=u[o],null!==t&&o>d&&o<p){a.beginPath();var b=t.color||n.color,A=t.x-t.width/2+1,S=e.height-t.y-e.area[2],w=e.height-t.y0-e.area[2];0<h&&(S-=w),a.setFillStyle(b),a.moveTo(A,t.y),a.fillRect(A,t.y,t.width,S),a.closePath(),a.fill()};break;case"meter":var u=getDataPoints(f,g,y,r,l,e,i,o);x.push(u),u=fixColumeMeterData(u,l,t.length,h,i,e,s.meterBorder);for(let t,o=0;o<u.length;o++)if(t=u[o],null!==t&&o>d&&o<p){a.beginPath(),0==h&&0<s.meterBorder&&(a.setStrokeStyle(n.color),a.setLineWidth(s.meterBorder*e.pix)),0==h?a.setFillStyle(s.meterFillColor):a.setFillStyle(t.color||n.color);var A=t.x-t.width/2,S=e.height-t.y-e.area[2];if(s.barBorderRadius&&4===s.barBorderRadius.length||!0===s.barBorderCircle){const i=A,o=t.y,n=t.width,r=e.height-e.area[2]-t.y;s.barBorderCircle&&(s.barBorderRadius=[n/2,n/2,0,0]);let[l,x,d,p]=s.barBorderRadius,h=Math.min(n/2,r/2);l=l>h?h:l,x=x>h?h:x,d=d>h?h:d,p=p>h?h:p,l=0>l?0:l,x=0>x?0:x,d=0>d?0:d,p=0>p?0:p,a.arc(i+l,o+l,l,-Math.PI,-Math.PI/2),a.arc(i+n-x,o+x,x,-Math.PI/2,0),a.arc(i+n-d,o+r-d,d,0,Math.PI/2),a.arc(i+p,o+r-p,p,Math.PI/2,Math.PI),a.fill()}else a.moveTo(A,t.y),a.lineTo(A+t.width,t.y),a.lineTo(A+t.width,e.height-e.area[2]),a.lineTo(A,e.height-e.area[2]),a.lineTo(A,t.y),a.fill();0==h&&0<s.meterBorder&&(a.closePath(),a.stroke())}}}),!1!==e.dataLabel&&1===o&&t.forEach(function(n,x){let d,p,h;d=[].concat(e.chartData.yAxisData.ranges[n.index]),p=d.pop(),h=d.shift();var c=n.data;switch(s.type){case"group":var g=getDataPoints(c,p,h,r,l,e,i,o);g=fixColumeData(g,l,t.length,x,i,e),drawPointText(g,n,i,a,e);break;case"stack":var g=getStackDataPoints(c,p,h,r,l,e,i,x,t,o);drawPointText(g,n,i,a,e);break;case"meter":var g=getDataPoints(c,p,h,r,l,e,i,o);drawPointText(g,n,i,a,e);}}),a.restore(),{xAxisPoints:r,calPoints:x,eachSpacing:l}}function drawLineDataPoints(t,e,i,a){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1,n=assign({},{type:"straight",width:2,activeType:"none"},e.extra.line);n.width*=e.pix;let r=e.chartData.xAxisData,l=r.xAxisPoints,s=r.eachSpacing;var x=[];a.save();let d=0,p=e.width+s;return e._scrollDistance_&&0!==e._scrollDistance_&&!0===e.enableScroll&&(a.translate(e._scrollDistance_,0),d=-e._scrollDistance_-2*s+e.area[3],p=d+(e.xAxis.itemCount+4)*s),t.forEach(function(t){let r,h,c;r=[].concat(e.chartData.yAxisData.ranges[t.index]),h=r.pop(),c=r.shift();var g=t.data,y=getDataPoints(g,h,c,l,s,e,i,o);x.push(y);var f=splitPoints(y,t);if("dash"==t.lineType){let i=t.dashLength?t.dashLength:8;i*=e.pix,a.setLineDash([i,i])}a.beginPath(),a.setStrokeStyle(t.color),a.setLineWidth(n.width),f.forEach(function(t){if(1===t.length)a.moveTo(t[0].x,t[0].y);else{a.moveTo(t[0].x,t[0].y);let i=0;if("curve"===n.type)for(let o,n=0;n<t.length;n++)if(o=t[n],0==i&&o.x>d&&(a.moveTo(o.x,o.y),i=1),0<n&&o.x>d&&o.x<p){var e=createCurveControlPoints(t,n-1);a.bezierCurveTo(e.ctrA.x,e.ctrA.y,e.ctrB.x,e.ctrB.y,o.x,o.y)}if("straight"===n.type)for(let e,o=0;o<t.length;o++)e=t[o],0==i&&e.x>d&&(a.moveTo(e.x,e.y),i=1),0<o&&e.x>d&&e.x<p&&a.lineTo(e.x,e.y);if("step"===n.type)for(let e,o=0;o<t.length;o++)e=t[o],0==i&&e.x>d&&(a.moveTo(e.x,e.y),i=1),0<o&&e.x>d&&e.x<p&&(a.lineTo(e.x,t[o-1].y),a.lineTo(e.x,e.y));a.moveTo(t[0].x,t[0].y)}}),a.stroke(),a.setLineDash([]),!1!==e.dataPointShape&&drawPointShape(y,t.color,t.pointShape,a,e),drawActivePoint(y,t.color,t.pointShape,a,e,n)}),!1!==e.dataLabel&&1===o&&t.forEach(function(t){let n,r,x;n=[].concat(e.chartData.yAxisData.ranges[t.index]),r=n.pop(),x=n.shift();var d=t.data,p=getDataPoints(d,r,x,l,s,e,i,o);drawPointText(p,t,i,a,e)}),a.restore(),{xAxisPoints:l,calPoints:x,eachSpacing:s}}function drawToolTipBridge(t,e,i,a,o,n){var r=t.extra.tooltip||{};r.horizentalLine&&t.tooltip&&1===a&&("line"==t.type||"area"==t.type||"column"==t.type||"mount"==t.type||"candle"==t.type||"mix"==t.type)&&drawToolTipHorizentalLine(t,e,i,o,n),i.save(),t._scrollDistance_&&0!==t._scrollDistance_&&!0===t.enableScroll&&i.translate(t._scrollDistance_,0),t.tooltip&&t.tooltip.textList&&t.tooltip.textList.length&&1===a&&drawToolTip(t.tooltip.textList,t.tooltip.offset,t,e,i,o,n),i.restore()}function drawXAxis(t,e,i,a){let o=e.chartData.xAxisData,n=o.xAxisPoints,r=o.startX,l=o.endX,s=o.eachSpacing;var x="center";("bar"==e.type||"line"==e.type||"area"==e.type||"scatter"==e.type||"bubble"==e.type)&&(x=e.xAxis.boundaryGap);var d=e.height-e.area[2],p=e.area[0];if(e.enableScroll&&e.xAxis.scrollShow){var h=e.height-e.area[2]+i.xAxisHeight,c=l-r,g=s*(n.length-1);"mount"==e.type&&e.extra&&e.extra.mount&&e.extra.mount.widthRatio&&1<e.extra.mount.widthRatio&&(2<e.extra.mount.widthRatio&&(e.extra.mount.widthRatio=2),g+=(e.extra.mount.widthRatio-1)*s);var y=c*c/g,f=0;e._scrollDistance_&&(f=-e._scrollDistance_*c/g),a.beginPath(),a.setLineCap("round"),a.setLineWidth(6*e.pix),a.setStrokeStyle(e.xAxis.scrollBackgroundColor||"#EFEBEF"),a.moveTo(r,h),a.lineTo(l,h),a.stroke(),a.closePath(),a.beginPath(),a.setLineCap("round"),a.setLineWidth(6*e.pix),a.setStrokeStyle(e.xAxis.scrollColor||"#A6A6A6"),a.moveTo(r+f,h),a.lineTo(r+f+y,h),a.stroke(),a.closePath(),a.setLineCap("butt")}if(a.save(),e._scrollDistance_&&0!==e._scrollDistance_&&a.translate(e._scrollDistance_,0),!0===e.xAxis.calibration&&(a.setStrokeStyle(e.xAxis.gridColor||"#cccccc"),a.setLineCap("butt"),a.setLineWidth(1*e.pix),n.forEach(function(t,i){0<i&&(a.beginPath(),a.moveTo(t-s/2,d),a.lineTo(t-s/2,d+3*e.pix),a.closePath(),a.stroke())})),!0!==e.xAxis.disableGrid&&(a.setStrokeStyle(e.xAxis.gridColor||"#cccccc"),a.setLineCap("butt"),a.setLineWidth(1*e.pix),"dash"==e.xAxis.gridType&&a.setLineDash([e.xAxis.dashLength*e.pix,e.xAxis.dashLength*e.pix]),e.xAxis.gridEval=e.xAxis.gridEval||1,n.forEach(function(t,i){0==i%e.xAxis.gridEval&&(a.beginPath(),a.moveTo(t,d),a.lineTo(t,p),a.stroke())}),a.setLineDash([])),!0!==e.xAxis.disabled){let o=t.length;e.xAxis.labelCount&&(o=e.xAxis.itemCount?Math.ceil(t.length/e.xAxis.itemCount*e.xAxis.labelCount):e.xAxis.labelCount,o-=1);let r=Math.ceil(t.length/o),l=[],p=t.length;for(let e=0;e<p;e++)0==e%r?l.push(t[e]):l.push("");l[p-1]=t[p-1];var u=e.xAxis.fontSize*e.pix||i.fontSize;0===i._xAxisTextAngle_?l.forEach(function(t,o){var r=e.xAxis.formatter?e.xAxis.formatter(t,o,e):t,l=-measureText(r+"",u,a)/2;"center"==x&&(l+=s/2);var p=0;e.xAxis.scrollShow&&(p=6*e.pix);var h=e._scrollDistance_||0,c="center"==x?n[o]+s/2:n[o];c-Math.abs(h)>=e.area[3]&&c-Math.abs(h)<=e.width-e.area[1]&&(a.beginPath(),a.setFontSize(u),a.setFillStyle(e.xAxis.fontColor||e.fontColor),a.fillText(r+"",n[o]+l,d+u+(i.xAxisHeight-p-u)/2),a.closePath(),a.stroke())}):l.forEach(function(t,o){var r=e.xAxis.formatter?e.xAxis.formatter(t):t,l=e._scrollDistance_||0,p="center"==x?n[o]+s/2:n[o];if(p-Math.abs(l)>=e.area[3]&&p-Math.abs(l)<=e.width-e.area[1]){a.save(),a.beginPath(),a.setFontSize(u),a.setFillStyle(e.xAxis.fontColor||e.fontColor);var h=measureText(r+"",u,a),c=n[o];"center"==x&&(c=n[o]+s/2);var g=0;e.xAxis.scrollShow&&(g=6*e.pix);var y=d+6*e.pix+u-u*Math.abs(Math.sin(i._xAxisTextAngle_));0>e.xAxis.rotateAngle?(c-=u/2,h=0):(c+=u/2,h=-h),a.translate(c,y),a.rotate(-1*i._xAxisTextAngle_),a.fillText(r+"",h,0),a.closePath(),a.stroke(),a.restore()}})}a.restore(),e.xAxis.axisLine&&(a.beginPath(),a.setStrokeStyle(e.xAxis.axisLineColor),a.setLineWidth(1*e.pix),a.moveTo(r,e.height-e.area[2]),a.lineTo(l,e.height-e.area[2]),a.stroke())}function drawYAxisGrid(t,e,i,a){if(!0===e.yAxis.disableGrid)return;let o=e.height-e.area[0]-e.area[2],n=o/e.yAxis.splitNumber,r=e.area[3],l=e.chartData.xAxisData.xAxisPoints,s=e.chartData.xAxisData.eachSpacing,x=s*(l.length-1);"mount"==e.type&&e.extra&&e.extra.mount&&e.extra.mount.widthRatio&&1<e.extra.mount.widthRatio&&(2<e.extra.mount.widthRatio&&(e.extra.mount.widthRatio=2),x+=(e.extra.mount.widthRatio-1)*s);let d=r+x,p=[],h=1;!1===e.xAxis.axisLine&&(h=0);for(let o=h;o<e.yAxis.splitNumber+1;o++)p.push(e.height-e.area[2]-n*o);a.save(),e._scrollDistance_&&0!==e._scrollDistance_&&a.translate(e._scrollDistance_,0),"dash"==e.yAxis.gridType&&a.setLineDash([e.yAxis.dashLength*e.pix,e.yAxis.dashLength*e.pix]),a.setStrokeStyle(e.yAxis.gridColor),a.setLineWidth(1*e.pix),p.forEach(function(t){a.beginPath(),a.moveTo(r,t),a.lineTo(d,t),a.stroke()}),a.setLineDash([]),a.restore()}function drawYAxis(t,e,a,o){if(!0===e.yAxis.disabled)return;var n=e.height-e.area[0]-e.area[2],r=n/e.yAxis.splitNumber,l=e.area[3],s=e.width-e.area[1],x=e.height-e.area[2];o.beginPath(),o.setFillStyle(e.background),!0==e.enableScroll&&e.xAxis.scrollPosition&&"left"!==e.xAxis.scrollPosition&&o.fillRect(0,0,l,x+2*e.pix),!0==e.enableScroll&&e.xAxis.scrollPosition&&"right"!==e.xAxis.scrollPosition&&o.fillRect(s,0,e.width,x+2*e.pix),o.closePath(),o.stroke();let d=e.area[3],p=e.width-e.area[1],h=e.area[3]+(e.width-e.area[1]-e.area[3])/2;if(e.yAxis.data)for(let t,l=0;l<e.yAxis.data.length;l++){t=e.yAxis.data[l];var c=[];if("categories"===t.type)for(let a=0;a<=t.categories.length;a++)c.push(e.area[0]+n/t.categories.length/2+n/t.categories.length*a);else for(let t=0;t<=e.yAxis.splitNumber;t++)c.push(e.area[0]+r*t);if(!0!==t.disabled){let i=e.chartData.yAxisData.rangesFormat[l],n=t.fontSize?t.fontSize*e.pix:a.fontSize,r=e.chartData.yAxisData.yAxisWidth[l],s=t.textAlign||"right";if(i.forEach(function(i,a){var l=c[a];o.beginPath(),o.setFontSize(n),o.setLineWidth(1*e.pix),o.setStrokeStyle(t.axisLineColor||"#cccccc"),o.setFillStyle(t.fontColor||e.fontColor);let x=0,g=4*e.pix;"left"==r.position?(!0==t.calibration&&(o.moveTo(d,l),o.lineTo(d-3*e.pix,l),g+=3*e.pix),"left"===s?(o.setTextAlign("left"),x=d-r.width):"right"===s?(o.setTextAlign("right"),x=d-g):(o.setTextAlign("center"),x=d-r.width/2),o.fillText(i+"",x,l+n/2-3*e.pix)):"right"==r.position?(!0==t.calibration&&(o.moveTo(p,l),o.lineTo(p+3*e.pix,l),g+=3*e.pix),"left"===s?(o.setTextAlign("left"),x=p+g):"right"===s?(o.setTextAlign("right"),x=p+r.width):(o.setTextAlign("center"),x=p+r.width/2),o.fillText(i+"",x,l+n/2-3*e.pix)):"center"==r.position&&(!0==t.calibration&&(o.moveTo(h,l),o.lineTo(h-3*e.pix,l),g+=3*e.pix),"left"===s?(o.setTextAlign("left"),x=h-r.width):"right"===s?(o.setTextAlign("right"),x=h-g):(o.setTextAlign("center"),x=h-r.width/2),o.fillText(i+"",x,l+n/2-3*e.pix)),o.closePath(),o.stroke(),o.setTextAlign("left")}),!1!==t.axisLine&&(o.beginPath(),o.setStrokeStyle(t.axisLineColor||"#cccccc"),o.setLineWidth(1*e.pix),"left"==r.position?(o.moveTo(d,e.height-e.area[2]),o.lineTo(d,e.area[0])):"right"==r.position?(o.moveTo(p,e.height-e.area[2]),o.lineTo(p,e.area[0])):"center"==r.position&&(o.moveTo(h,e.height-e.area[2]),o.lineTo(h,e.area[0])),o.stroke()),e.yAxis.showTitle){let i=t.titleFontSize*e.pix||a.fontSize,n=t.title;o.beginPath(),o.setFontSize(i),o.setFillStyle(t.titleFontColor||e.fontColor),"left"==r.position?o.fillText(n,d-measureText(n,i,o)/2+(t.titleOffsetX||0),e.area[0]-(10-(t.titleOffsetY||0))*e.pix):"right"==r.position?o.fillText(n,p-measureText(n,i,o)/2+(t.titleOffsetX||0),e.area[0]-(10-(t.titleOffsetY||0))*e.pix):"center"==r.position&&o.fillText(n,h-measureText(n,i,o)/2+(t.titleOffsetX||0),e.area[0]-(10-(t.titleOffsetY||0))*e.pix),o.closePath(),o.stroke()}"left"==r.position?d-=r.width+e.yAxis.padding*e.pix:p+=r.width+e.yAxis.padding*e.pix}}}function drawLegend(t,e,i,a,o){if(!1===e.legend.show)return;let n=o.legendData,r=n.points,l=n.area,s=e.legend.padding*e.pix,x=e.legend.fontSize*e.pix,d=15*e.pix,p=5*e.pix,h=e.legend.itemGap*e.pix,c=Math.max(e.legend.lineHeight*e.pix,x);a.beginPath(),a.setLineWidth(e.legend.borderWidth*e.pix),a.setStrokeStyle(e.legend.borderColor),a.setFillStyle(e.legend.backgroundColor),a.moveTo(l.start.x,l.start.y),a.rect(l.start.x,l.start.y,l.width,l.height),a.closePath(),a.fill(),a.stroke(),r.forEach(function(t,o){let r=0,g=0;r=n.widthArr[o],g=n.heightArr[o];let y=0,f=0;if("top"==e.legend.position||"bottom"==e.legend.position){switch(e.legend.float){case"left":y=l.start.x+s;break;case"right":y=l.start.x+l.width-r;break;default:y=l.start.x+(l.width-r)/2;}f=l.start.y+s+o*c}else r=0==o?0:n.widthArr[o-1],y=l.start.x+s+r,f=l.start.y+s+(l.height-g)/2;a.setFontSize(i.fontSize);for(let n,r=0;r<t.length;r++){switch(n=t[r],n.area=[0,0,0,0],n.area[0]=y,n.area[1]=f,n.area[3]=f+c,a.beginPath(),a.setLineWidth(1*e.pix),a.setStrokeStyle(n.show?n.color:e.legend.hiddenColor),a.setFillStyle(n.show?n.color:e.legend.hiddenColor),n.legendShape){case"line":a.moveTo(y,f+.5*c-2*e.pix),a.fillRect(y,f+.5*c-2*e.pix,15*e.pix,4*e.pix);break;case"triangle":a.moveTo(y+7.5*e.pix,f+.5*c-5*e.pix),a.lineTo(y+2.5*e.pix,f+.5*c+5*e.pix),a.lineTo(y+12.5*e.pix,f+.5*c+5*e.pix),a.lineTo(y+7.5*e.pix,f+.5*c-5*e.pix);break;case"diamond":a.moveTo(y+7.5*e.pix,f+.5*c-5*e.pix),a.lineTo(y+2.5*e.pix,f+.5*c),a.lineTo(y+7.5*e.pix,f+.5*c+5*e.pix),a.lineTo(y+12.5*e.pix,f+.5*c),a.lineTo(y+7.5*e.pix,f+.5*c-5*e.pix);break;case"circle":a.moveTo(y+7.5*e.pix,f+.5*c),a.arc(y+7.5*e.pix,f+.5*c,5*e.pix,0,2*Math.PI);break;case"rect":a.moveTo(y,f+.5*c-5*e.pix),a.fillRect(y,f+.5*c-5*e.pix,15*e.pix,10*e.pix);break;case"square":a.moveTo(y+5*e.pix,f+.5*c-5*e.pix),a.fillRect(y+5*e.pix,f+.5*c-5*e.pix,10*e.pix,10*e.pix);break;case"none":break;default:a.moveTo(y,f+.5*c-5*e.pix),a.fillRect(y,f+.5*c-5*e.pix,15*e.pix,10*e.pix);}a.closePath(),a.fill(),a.stroke(),y+=d+p;const i=n.legendText?n.legendText:n.name;a.beginPath(),a.setFontSize(x),a.setFillStyle(n.show?e.legend.fontColor:e.legend.hiddenColor),a.fillText(i,y,f+(.5*c+.5*x-2)),a.closePath(),a.stroke(),"top"==e.legend.position||"bottom"==e.legend.position?(y+=measureText(i,x,a)+h,n.area[2]=y):(n.area[2]=y+measureText(i,x,a)+h,y-=d+p,f+=c)}})}function drawPieDataPoints(t,e,i,a){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1,n=assign({},{activeOpacity:.5,activeRadius:10,offsetAngle:0,labelWidth:15,ringWidth:30,customRadius:0,border:!1,borderWidth:2,borderColor:"#FFFFFF",centerColor:"#FFFFFF",linearType:"none",customColor:[]},"pie"==e.type?e.extra.pie:e.extra.ring),r={x:e.area[3]+(e.width-e.area[1]-e.area[3])/2,y:e.area[0]+(e.height-e.area[0]-e.area[2])/2};0==i.pieChartLinePadding&&(i.pieChartLinePadding=n.activeRadius*e.pix);var l=Math.min((e.width-e.area[1]-e.area[3])/2-i.pieChartLinePadding-i.pieChartTextPadding-i._pieTextMaxLength_,(e.height-e.area[0]-e.area[2])/2-i.pieChartLinePadding-i.pieChartTextPadding);l=10>l?10:l,0<n.customRadius&&(l=n.customRadius*e.pix),t=getPieDataPoints(t,l,o);var s=n.activeRadius*e.pix;if(n.customColor=fillCustomColor(n.linearType,n.customColor,t,i),t=t.map(function(t){return t._start_+=n.offsetAngle*Math.PI/180,t}),t.forEach(function(t,i){e.tooltip&&e.tooltip.index==i&&(a.beginPath(),a.setFillStyle(hexToRgb(t.color,n.activeOpacity||.5)),a.moveTo(r.x,r.y),a.arc(r.x,r.y,t._radius_+s,t._start_,t._start_+2*t._proportion_*Math.PI),a.closePath(),a.fill()),a.beginPath(),a.setLineWidth(n.borderWidth*e.pix),a.lineJoin="round",a.setStrokeStyle(n.borderColor);var o=t.color;if("custom"==n.linearType){var l;l=a.createCircularGradient?a.createCircularGradient(r.x,r.y,t._radius_):a.createRadialGradient(r.x,r.y,0,r.x,r.y,t._radius_),l.addColorStop(0,hexToRgb(n.customColor[t.linearIndex],1)),l.addColorStop(1,hexToRgb(t.color,1)),o=l}a.setFillStyle(o),a.moveTo(r.x,r.y),a.arc(r.x,r.y,t._radius_,t._start_,t._start_+2*t._proportion_*Math.PI),a.closePath(),a.fill(),!0==n.border&&a.stroke()}),"ring"===e.type){var x=.6*l;"number"==typeof n.ringWidth&&0<n.ringWidth&&(x=Math.max(0,l-n.ringWidth*e.pix)),a.beginPath(),a.setFillStyle(n.centerColor),a.moveTo(r.x,r.y),a.arc(r.x,r.y,x,0,2*Math.PI),a.closePath(),a.fill()}return!1!==e.dataLabel&&1===o&&drawPieText(t,e,i,a,l,r),1===o&&"ring"===e.type&&drawRingTitle(e,i,a,r),{center:r,radius:l,series:t}}function drawArcbarDataPoints(t,e,i,a){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1,n=assign({},{startAngle:.75,endAngle:.25,type:"default",direction:"cw",lineCap:"round",width:12,gap:2,linearType:"none",customColor:[]},e.extra.arcbar);t=getArcbarDataPoints(t,n,o);var r=n.centerX||n.centerY?{x:n.centerX?n.centerX:e.width/2,y:n.centerY?n.centerY:e.height/2}:{x:e.width/2,y:e.height/2};var l;n.radius?l=n.radius:(l=Math.min(r.x,r.y),l-=5*e.pix,l-=n.width/2),l=10>l?10:l,n.customColor=fillCustomColor(n.linearType,n.customColor,t,i);for(let o,d=0;d<t.length;d++){o=t[d],a.setLineWidth(n.width*e.pix),a.setStrokeStyle(n.backgroundColor||"#E9E9E9"),a.setLineCap(n.lineCap),a.beginPath(),"default"==n.type?a.arc(r.x,r.y,l-(n.width*e.pix+n.gap*e.pix)*d,n.startAngle*Math.PI,n.endAngle*Math.PI,"ccw"==n.direction):a.arc(r.x,r.y,l-(n.width*e.pix+n.gap*e.pix)*d,0,2*Math.PI,"ccw"==n.direction),a.stroke();var s=o.color;if("custom"==n.linearType){var x=a.createLinearGradient(r.x-l,r.y,r.x+l,r.y);x.addColorStop(1,hexToRgb(n.customColor[o.linearIndex],1)),x.addColorStop(0,hexToRgb(o.color,1)),s=x}a.setLineWidth(n.width*e.pix),a.setStrokeStyle(s),a.setLineCap(n.lineCap),a.beginPath(),a.arc(r.x,r.y,l-(n.width*e.pix+n.gap*e.pix)*d,n.startAngle*Math.PI,o._proportion_*Math.PI,"ccw"==n.direction),a.stroke()}return drawRingTitle(e,i,a,r),{center:r,radius:l,series:t}}function drawRadarDataPoints(t,e,a,o){var n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1,r=assign({},{gridColor:"#cccccc",gridType:"radar",gridEval:1,axisLabel:!1,axisLabelTofix:0,labelColor:"#666666",labelPointShow:!1,labelPointRadius:3,labelPointColor:"#cccccc",opacity:.2,gridCount:3,border:!1,borderWidth:2,linearType:"none",customColor:[]},e.extra.radar),l=getRadarCoordinateSeries(e.categories.length),s={x:e.area[3]+(e.width-e.area[1]-e.area[3])/2,y:e.area[0]+(e.height-e.area[0]-e.area[2])/2},x=(e.width-e.area[1]-e.area[3])/2,d=(e.height-e.area[0]-e.area[2])/2,p=Math.min(x-(getMaxTextListLength(e.categories,a.fontSize,o)+a.radarLabelTextMargin),d-a.radarLabelTextMargin);p-=a.radarLabelTextMargin*e.pix,p=10>p?10:p,p=r.radius?r.radius:p,o.beginPath(),o.setLineWidth(1*e.pix),o.setStrokeStyle(r.gridColor),l.forEach(function(t,e){var i=convertCoordinateOrigin(p*Math.cos(t),p*Math.sin(t),s);o.moveTo(s.x,s.y),0==e%r.gridEval&&o.lineTo(i.x,i.y)}),o.stroke(),o.closePath();for(var h=function(t){var i={};if(o.beginPath(),o.setLineWidth(1*e.pix),o.setStrokeStyle(r.gridColor),"radar"==r.gridType)l.forEach(function(e,a){var n=convertCoordinateOrigin(p/r.gridCount*t*Math.cos(e),p/r.gridCount*t*Math.sin(e),s);0===a?(i=n,o.moveTo(n.x,n.y)):o.lineTo(n.x,n.y)}),o.lineTo(i.x,i.y);else{var a=convertCoordinateOrigin(p/r.gridCount*t*Math.cos(1.5),p/r.gridCount*t*Math.sin(1.5),s);o.arc(s.x,s.y,s.y-a.y,0,2*Math.PI,!1)}o.stroke(),o.closePath()},c=1;c<=r.gridCount;c++)h(c);r.customColor=fillCustomColor(r.linearType,r.customColor,t,a);var g=getRadarDataPoints(l,s,p,t,e,n);if(g.forEach(function(i,a){o.beginPath(),o.setLineWidth(r.borderWidth*e.pix),o.setStrokeStyle(i.color);var n=hexToRgb(i.color,r.opacity);if("custom"==r.linearType){var l;l=o.createCircularGradient?o.createCircularGradient(s.x,s.y,p):o.createRadialGradient(s.x,s.y,0,s.x,s.y,p),l.addColorStop(0,hexToRgb(r.customColor[t[a].linearIndex],r.opacity)),l.addColorStop(1,hexToRgb(i.color,r.opacity)),n=l}if(o.setFillStyle(n),i.data.forEach(function(t,e){0===e?o.moveTo(t.position.x,t.position.y):o.lineTo(t.position.x,t.position.y)}),o.closePath(),o.fill(),!0===r.border&&o.stroke(),o.closePath(),!1!==e.dataPointShape){var x=i.data.map(function(t){return t.position});drawPointShape(x,i.color,i.pointShape,o,e)}}),!0===r.axisLabel){const i=Math.max(r.max,Math.max.apply(null,dataCombine(t))),a=p/r.gridCount,n=e.fontSize*e.pix;o.setFontSize(n),o.setFillStyle(e.fontColor),o.setTextAlign("left");for(var c=0;c<r.gridCount+1;c++){let t=c*i/r.gridCount;t=t.toFixed(r.axisLabelTofix),o.fillText(t+"",s.x+3*e.pix,s.y-c*a+n/2)}}return drawRadarLabel(l,p,s,e,a,o),!1!==e.dataLabel&&1===n&&(g.forEach(function(t){o.beginPath();var i=t.textSize*e.pix||a.fontSize;o.setFontSize(i),o.setFillStyle(t.textColor||e.fontColor),t.data.forEach(function(t){2>Math.abs(t.position.x-s.x)?t.position.y<s.y?(o.setTextAlign("center"),o.fillText(t.value,t.position.x,t.position.y-4)):(o.setTextAlign("center"),o.fillText(t.value,t.position.x,t.position.y+i+2)):t.position.x<s.x?(o.setTextAlign("right"),o.fillText(t.value,t.position.x-4,t.position.y+i/2-2)):(o.setTextAlign("left"),o.fillText(t.value,t.position.x+4,t.position.y+i/2-2))}),o.closePath(),o.stroke()}),o.setTextAlign("left")),{center:s,radius:p,angleList:l}}function drawCanvas(t,e){e.draw()}var Timing={easeIn:function(t){return Math.pow(t,3)},easeOut:function(t){return Math.pow(t-1,3)+1},easeInOut:function(t){return 1>(t/=.5)?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)},linear:function(t){return t}};function Animation(t){this.isStop=!1,t.duration="undefined"==typeof t.duration?1e3:t.duration,t.timing=t.timing||"easeInOut";var e=function(){return"undefined"==typeof setTimeout?"undefined"==typeof requestAnimationFrame?function(t){t(null)}:requestAnimationFrame:function(t,e){setTimeout(function(){var e=+new Date;t(e)},e)}}(),i=null,a=function(o){if(null===o||!0===this.isStop)return t.onProcess&&t.onProcess(1),void(t.onAnimationFinish&&t.onAnimationFinish());if(null===i&&(i=o),o-i<t.duration){var n=(o-i)/t.duration,r=Timing[t.timing];n=r(n),t.onProcess&&t.onProcess(n),e(a,17)}else t.onProcess&&t.onProcess(1),t.onAnimationFinish&&t.onAnimationFinish()};a=a.bind(this),e(a,17)}Animation.prototype.stop=function(){this.isStop=!0};function drawCharts(t,e,a,o){var n=this,r=e.series;("pie"===t||"ring"===t||"mount"===t||"rose"===t||"funnel"===t)&&(r=fixPieSeries(r,e,a));var l=e.categories;if("mount"===t){l=[];for(let t=0;t<r.length;t++)!1!==r[t].show&&l.push(r[t].name);e.categories=l}r=fillSeries(r,e,a);var s=e.animation?e.duration:0;n.animationInstance&&n.animationInstance.stop();var x=null;if("candle"==t){let t=assign({},e.extra.candle.average);t.show?(x=calCandleMA(t.day,t.name,t.color,r[0].data),x=fillSeries(x,e,a),e.seriesMA=x):e.seriesMA?x=e.seriesMA=fillSeries(e.seriesMA,e,a):x=r}else x=r;e._series_=r=filterSeries(r),e.area=[,,,,];for(let i=0;4>i;i++)e.area[i]=e.padding[i]*e.pix;var d=calLegendData(x,e,a,e.chartData,o),p=d.area.wholeHeight,h=d.area.wholeWidth;switch(e.legend.position){case"top":e.area[0]+=p;break;case"bottom":e.area[2]+=p;break;case"left":e.area[3]+=h;break;case"right":e.area[1]+=h;}let c={},g=0;if("line"===e.type||"column"===e.type||"mount"===e.type||"area"===e.type||"mix"===e.type||"candle"===e.type||"scatter"===e.type||"bubble"===e.type||"bar"===e.type){if(c=calYAxisData(r,e,a,o),g=c.yAxisWidth,e.yAxis.showTitle){let t=0;for(let o=0;o<e.yAxis.data.length;o++)t=Math.max(t,e.yAxis.data[o].titleFontSize?e.yAxis.data[o].titleFontSize*e.pix:a.fontSize);e.area[0]+=t}let t=0,n=0;for(let a=0;a<g.length;a++)"left"==g[a].position?(e.area[3]+=0<n?g[a].width+e.yAxis.padding*e.pix:g[a].width,n+=1):"right"==g[a].position&&(e.area[1]+=0<t?g[a].width+e.yAxis.padding*e.pix:g[a].width,t+=1)}else a.yAxisWidth=g;if(e.chartData.yAxisData=c,e.categories&&e.categories.length&&"radar"!==e.type&&"gauge"!==e.type&&"bar"!==e.type){e.chartData.xAxisData=getXAxisPoints(e.categories,e,a);let t=calCategoriesData(e.categories,e,a,e.chartData.xAxisData.eachSpacing,o),i=t.xAxisHeight,n=t.angle;a.xAxisHeight=i,a._xAxisTextAngle_=n,e.area[2]+=i,e.chartData.categoriesData=t}else if("line"===e.type||"area"===e.type||"scatter"===e.type||"bubble"===e.type||"bar"===e.type){e.chartData.xAxisData=calXAxisData(r,e,a,o),l=e.chartData.xAxisData.rangesFormat;let t=calCategoriesData(l,e,a,e.chartData.xAxisData.eachSpacing,o),i=t.xAxisHeight,n=t.angle;a.xAxisHeight=i,a._xAxisTextAngle_=n,e.area[2]+=i,e.chartData.categoriesData=t}else e.chartData.xAxisData={xAxisPoints:[]};if(e.enableScroll&&"right"==e.xAxis.scrollAlign&&void 0===e._scrollDistance_){let t=0,i=e.chartData.xAxisData.xAxisPoints,a=e.chartData.xAxisData.startX,o=e.chartData.xAxisData.endX,r=e.chartData.xAxisData.eachSpacing,l=r*(i.length-1);t=o-a-l,n.scrollOption.currentOffset=t,n.scrollOption.startTouchX=t,n.scrollOption.distance=0,n.scrollOption.lastMoveTime=0,e._scrollDistance_=t}("pie"===t||"ring"===t||"rose"===t)&&(a._pieTextMaxLength_=!1===e.dataLabel?0:getPieTextMaxLength(x,a,o,e)),"line"===t?this.animationInstance=new Animation({timing:e.timing,duration:s,onProcess:function(t){o.clearRect(0,0,e.width,e.height),e.rotate&&contextRotate(o,e),drawYAxisGrid(l,e,a,o),drawXAxis(l,e,a,o);var i=drawLineDataPoints(r,e,a,o,t),n=i.xAxisPoints,s=i.calPoints,x=i.eachSpacing;e.chartData.xAxisPoints=n,e.chartData.calPoints=s,e.chartData.eachSpacing=x,drawYAxis(r,e,a,o),!1!==e.enableMarkLine&&1===t&&drawMarkLine(e,a,o),drawLegend(e.series,e,a,o,e.chartData),drawToolTipBridge(e,a,o,t,x,n),drawCanvas(e,o)},onAnimationFinish:function(){n.uevent.trigger("renderComplete")}}):"column"===t?this.animationInstance=new Animation({timing:e.timing,duration:s,onProcess:function(t){o.clearRect(0,0,e.width,e.height),e.rotate&&contextRotate(o,e),drawYAxisGrid(l,e,a,o),drawXAxis(l,e,a,o);var i=drawColumnDataPoints(r,e,a,o,t),n=i.xAxisPoints,s=i.calPoints,x=i.eachSpacing;e.chartData.xAxisPoints=n,e.chartData.calPoints=s,e.chartData.eachSpacing=x,drawYAxis(r,e,a,o),!1!==e.enableMarkLine&&1===t&&drawMarkLine(e,a,o),drawLegend(e.series,e,a,o,e.chartData),drawToolTipBridge(e,a,o,t,x,n),drawCanvas(e,o)},onAnimationFinish:function(){n.uevent.trigger("renderComplete")}}):"pie"===t?this.animationInstance=new Animation({timing:e.timing,duration:s,onProcess:function(t){o.clearRect(0,0,e.width,e.height),e.rotate&&contextRotate(o,e),e.chartData.pieData=drawPieDataPoints(r,e,a,o,t),drawLegend(e.series,e,a,o,e.chartData),drawToolTipBridge(e,a,o,t),drawCanvas(e,o)},onAnimationFinish:function(){n.uevent.trigger("renderComplete")}}):"radar"===t?this.animationInstance=new Animation({timing:e.timing,duration:s,onProcess:function(t){o.clearRect(0,0,e.width,e.height),e.rotate&&contextRotate(o,e),e.chartData.radarData=drawRadarDataPoints(r,e,a,o,t),drawLegend(e.series,e,a,o,e.chartData),drawToolTipBridge(e,a,o,t),drawCanvas(e,o)},onAnimationFinish:function(){n.uevent.trigger("renderComplete")}}):"arcbar"===t?this.animationInstance=new Animation({timing:e.timing,duration:s,onProcess:function(t){o.clearRect(0,0,e.width,e.height),e.rotate&&contextRotate(o,e),e.chartData.arcbarData=drawArcbarDataPoints(r,e,a,o,t),drawCanvas(e,o)},onAnimationFinish:function(){n.uevent.trigger("renderComplete")}}):void 0}function uChartsEvent(){this.events={}}uChartsEvent.prototype.addEventListener=function(t,e){this.events[t]=this.events[t]||[],this.events[t].push(e)},uChartsEvent.prototype.delEventListener=function(t){this.events[t]=[]},uChartsEvent.prototype.trigger=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];var a=e[0],o=e.slice(1);!this.events[a]||this.events[a].forEach(function(t){try{t.apply(null,o)}catch(t){}})};var uCharts=function(t){t.pix=t.pixelRatio?t.pixelRatio:1,t.fontSize=t.fontSize?t.fontSize:13,t.fontColor=t.fontColor?t.fontColor:config.fontColor,(""==t.background||"none"==t.background)&&(t.background="#FFFFFF"),t.title=assign({},t.title),t.subtitle=assign({},t.subtitle),t.duration=t.duration?t.duration:1e3,t.yAxis=assign({},{data:[],showTitle:!1,disabled:!1,disableGrid:!1,gridSet:"number",splitNumber:5,gridType:"solid",dashLength:4*t.pix,gridColor:"#cccccc",padding:10,fontColor:"#666666"},t.yAxis),t.xAxis=assign({},{rotateLabel:!1,rotateAngle:45,disabled:!1,disableGrid:!1,splitNumber:5,calibration:!1,gridType:"solid",dashLength:4,scrollAlign:"left",boundaryGap:"center",axisLine:!0,axisLineColor:"#cccccc"},t.xAxis),t.xAxis.scrollPosition=t.xAxis.scrollAlign,t.legend=assign({},{show:!0,position:"bottom",float:"center",backgroundColor:"rgba(0,0,0,0)",borderColor:"rgba(0,0,0,0)",borderWidth:0,padding:5,margin:5,itemGap:10,fontSize:t.fontSize,lineHeight:t.fontSize,fontColor:t.fontColor,formatter:{},hiddenColor:"#CECECE"},t.legend),t.extra=assign({},t.extra),t.rotate=!!t.rotate,t.animation=!!t.animation,t.rotate=!!t.rotate,t.canvas2d=!!t.canvas2d;let e=assign({},config);if(e.color=t.color?t.color:e.color,"pie"==t.type&&(e.pieChartLinePadding=!1===t.dataLabel?0:t.extra.pie.labelWidth*t.pix||e.pieChartLinePadding*t.pix),e.pieChartTextPadding=!1===t.dataLabel?0:e.pieChartTextPadding*t.pix,e.rotate=t.rotate,t.rotate){let e=t.width,i=t.height;t.width=i,t.height=e}if(t.padding=t.padding?t.padding:e.padding,e.yAxisWidth=config.yAxisWidth*t.pix,e.xAxisHeight=config.xAxisHeight*t.pix,t.enableScroll&&t.xAxis.scrollShow&&(e.xAxisHeight+=6*t.pix),e.fontSize=t.fontSize*t.pix,e.titleFontSize=config.titleFontSize*t.pix,e.subtitleFontSize=config.subtitleFontSize*t.pix,e.toolTipPadding=config.toolTipPadding*t.pix,e.toolTipLineHeight=config.toolTipLineHeight*t.pix,!t.context)throw new Error("[uCharts] \u672A\u83B7\u53D6\u5230context\uFF01\u6CE8\u610F\uFF1Av2.0\u7248\u672C\u540E\uFF0C\u9700\u8981\u81EA\u884C\u83B7\u53D6canvas\u7684\u7ED8\u56FE\u4E0A\u4E0B\u6587\u5E76\u4F20\u5165opts.context\uFF01");this.context=t.context,this.context.setTextAlign||(this.context.setStrokeStyle=function(t){return this.strokeStyle=t},this.context.setLineWidth=function(t){return this.lineWidth=t},this.context.setLineCap=function(t){return this.lineCap=t},this.context.setFontSize=function(t){return this.font=t+"px sans-serif"},this.context.setFillStyle=function(t){return this.fillStyle=t},this.context.setTextAlign=function(t){return this.textAlign=t},this.context.draw=function(){}),this.context.setLineDash||(this.context.setLineDash=function(){}),t.chartData={},this.uevent=new uChartsEvent,this.scrollOption={currentOffset:0,startTouchX:0,distance:0,lastMoveTime:0},this.opts=t,this.config=e,drawCharts.call(this,t.type,t,e,this.context)};uCharts.prototype.updateData=function(){let t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};this.opts=assign({},this.opts,t),this.opts.updateData=!0;let e=t.scrollPosition||"current";switch(e){case"current":this.opts._scrollDistance_=this.scrollOption.currentOffset;break;case"left":this.opts._scrollDistance_=0,this.scrollOption={currentOffset:0,startTouchX:0,distance:0,lastMoveTime:0};break;case"right":let t=calYAxisData(this.opts.series,this.opts,this.config,this.context),i=t.yAxisWidth;this.config.yAxisWidth=i;let a=0,o=getXAxisPoints(this.opts.categories,this.opts,this.config),n=o.xAxisPoints,r=o.startX,l=o.endX,s=o.eachSpacing,x=s*(n.length-1);a=l-r-x,this.scrollOption={currentOffset:a,startTouchX:a,distance:0,lastMoveTime:0},this.opts._scrollDistance_=a;}drawCharts.call(this,this.opts.type,this.opts,this.config,this.context)},uCharts.prototype.zoom=function(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this.opts.xAxis.itemCount;if(!0!==this.opts.enableScroll)return void console.log("[uCharts] \u8BF7\u542F\u7528\u6EDA\u52A8\u6761\u540E\u4F7F\u7528");let e=Math.round(Math.abs(this.scrollOption.currentOffset)/this.opts.chartData.eachSpacing)+Math.round(this.opts.xAxis.itemCount/2);this.opts.animation=!1,this.opts.xAxis.itemCount=t.itemCount;let i=calYAxisData(this.opts.series,this.opts,this.config,this.context),a=i.yAxisWidth;this.config.yAxisWidth=a;let o=0,n=getXAxisPoints(this.opts.categories,this.opts,this.config),r=n.xAxisPoints,l=n.startX,s=n.endX,x=n.eachSpacing,d=s-l,p=d-x*(r.length-1);o=d/2-x*e,0<o&&(o=0),o<p&&(o=p),this.scrollOption={currentOffset:o,startTouchX:0,distance:0,lastMoveTime:0},calValidDistance(this,o,this.opts.chartData,this.config,this.opts),this.opts._scrollDistance_=o,drawCharts.call(this,this.opts.type,this.opts,this.config,this.context)},uCharts.prototype.dobuleZoom=function(t){if(!0!==this.opts.enableScroll)return void console.log("[uCharts] \u8BF7\u542F\u7528\u6EDA\u52A8\u6761\u540E\u4F7F\u7528");const e=t.changedTouches;if(2>e.length)return;for(var a=0;a<e.length;a++)e[a].x=e[a].x?e[a].x:e[a].clientX,e[a].y=e[a].y?e[a].y:e[a].clientY;const o=[getTouches(e[0],this.opts,t),getTouches(e[1],this.opts,t)],n=Math.abs(o[0].x-o[1].x);if(!this.scrollOption.moveCount){let t={changedTouches:[{x:e[0].x,y:this.opts.area[0]/this.opts.pix+2}]},i={changedTouches:[{x:e[1].x,y:this.opts.area[0]/this.opts.pix+2}]};this.opts.rotate&&(t={changedTouches:[{x:this.opts.height/this.opts.pix-this.opts.area[0]/this.opts.pix-2,y:e[0].y}]},i={changedTouches:[{x:this.opts.height/this.opts.pix-this.opts.area[0]/this.opts.pix-2,y:e[1].y}]});const a=this.getCurrentDataIndex(t).index,o=this.getCurrentDataIndex(i).index,n=Math.abs(a-o);return this.scrollOption.moveCount=n,this.scrollOption.moveCurrent1=Math.min(a,o),void(this.scrollOption.moveCurrent2=Math.max(a,o))}let r=n/this.scrollOption.moveCount,l=(this.opts.width-this.opts.area[1]-this.opts.area[3])/r;l=2>=l?2:l,l=l>=this.opts.categories.length?this.opts.categories.length:l,this.opts.animation=!1,this.opts.xAxis.itemCount=l;let s=0,x=getXAxisPoints(this.opts.categories,this.opts,this.config),d=x.xAxisPoints,p=x.startX,h=x.endX,c=x.eachSpacing,g=c*this.scrollOption.moveCurrent1,y=h-p-c*(d.length-1);s=-g+Math.min(o[0].x,o[1].x)-this.opts.area[3]-c,0<s&&(s=0),s<y&&(s=y),this.scrollOption.currentOffset=s,this.scrollOption.startTouchX=0,this.scrollOption.distance=0,calValidDistance(this,s,this.opts.chartData,this.config,this.opts),this.opts._scrollDistance_=s,drawCharts.call(this,this.opts.type,this.opts,this.config,this.context)},uCharts.prototype.stopAnimation=function(){this.animationInstance&&this.animationInstance.stop()},uCharts.prototype.addEventListener=function(t,e){this.uevent.addEventListener(t,e)},uCharts.prototype.delEventListener=function(t){this.uevent.delEventListener(t)},uCharts.prototype.getCurrentDataIndex=function(t){var e=null;if(e=t.changedTouches?t.changedTouches[0]:t.mp.changedTouches[0],e){let i=getTouches(e,this.opts,t);return"pie"===this.opts.type||"ring"===this.opts.type?findPieChartCurrentIndex({x:i.x,y:i.y},this.opts.chartData.pieData,this.opts):"rose"===this.opts.type?findRoseChartCurrentIndex({x:i.x,y:i.y},this.opts.chartData.pieData,this.opts):"radar"===this.opts.type?findRadarChartCurrentIndex({x:i.x,y:i.y},this.opts.chartData.radarData,this.opts.categories.length):"funnel"===this.opts.type?findFunnelChartCurrentIndex({x:i.x,y:i.y},this.opts.chartData.funnelData):"map"===this.opts.type?findMapChartCurrentIndex({x:i.x,y:i.y},this.opts):"word"===this.opts.type?findWordChartCurrentIndex({x:i.x,y:i.y},this.opts.chartData.wordCloudData):"bar"===this.opts.type?findBarChartCurrentIndex({x:i.x,y:i.y},this.opts.chartData.calPoints,this.opts,this.config,Math.abs(this.scrollOption.currentOffset)):findCurrentIndex({x:i.x,y:i.y},this.opts.chartData.calPoints,this.opts,this.config,Math.abs(this.scrollOption.currentOffset))}return-1},uCharts.prototype.getLegendDataIndex=function(t){var e=null;if(e=t.changedTouches?t.changedTouches[0]:t.mp.changedTouches[0],e){let i=getTouches(e,this.opts,t);return findLegendIndex({x:i.x,y:i.y},this.opts.chartData.legendData)}return-1},uCharts.prototype.touchLegend=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=null;if(i=t.changedTouches?t.changedTouches[0]:t.mp.changedTouches[0],i){var a=getTouches(i,this.opts,t),o=this.getLegendDataIndex(t);0<=o&&("candle"==this.opts.type?this.opts.seriesMA[o].show=!this.opts.seriesMA[o].show:this.opts.series[o].show=!this.opts.series[o].show,this.opts.animation=!!e.animation,this.opts._scrollDistance_=this.scrollOption.currentOffset,drawCharts.call(this,this.opts.type,this.opts,this.config,this.context))}},uCharts.prototype.showToolTip=function(t){var e=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},i=null;i=t.changedTouches?t.changedTouches[0]:t.mp.changedTouches[0],i||console.log("[uCharts] \u672A\u83B7\u53D6\u5230event\u5750\u6807\u4FE1\u606F");var a=getTouches(i,this.opts,t),o=this.scrollOption.currentOffset,n=assign({},this.opts,{_scrollDistance_:o,animation:!1});if("line"===this.opts.type||"area"===this.opts.type||"column"===this.opts.type||"scatter"===this.opts.type||"bubble"===this.opts.type){var r=this.getCurrentDataIndex(t),l=e.index==null?r.index:e.index;if(-1<l||0<l.length){var s=getSeriesDataItem(this.opts.series,l,r.group);if(0!==s.length){var x=getToolTipData(s,this.opts,l,r.group,this.opts.categories,e),d=x.textList,p=x.offset;p.y=a.y,n.tooltip={textList:e.textList===void 0?d:e.textList,offset:e.offset===void 0?p:e.offset,option:e,index:l}}}drawCharts.call(this,n.type,n,this.config,this.context)}if("pie"===this.opts.type||"ring"===this.opts.type||"rose"===this.opts.type||"funnel"===this.opts.type){var l=null==e.index?this.getCurrentDataIndex(t):e.index;if(-1<l){var n=assign({},this.opts,{animation:!1}),s=assign({},n._series_[l]),d=[{text:e.formatter?e.formatter(s,void 0,l,n):s.name+": "+s.data,color:s.color}],p={x:a.x,y:a.y};n.tooltip={textList:e.textList?e.textList:d,offset:void 0===e.offset?p:e.offset,option:e,index:l}}drawCharts.call(this,n.type,n,this.config,this.context)}if("radar"===this.opts.type){var l=null==e.index?this.getCurrentDataIndex(t):e.index;if(-1<l){var n=assign({},this.opts,{animation:!1}),s=getSeriesDataItem(this.opts.series,l);if(0!==s.length){var d=s.map(t=>({text:e.formatter?e.formatter(t,this.opts.categories[l],l,this.opts):t.name+": "+t.data,color:t.color})),p={x:a.x,y:a.y};n.tooltip={textList:e.textList?e.textList:d,offset:void 0===e.offset?p:e.offset,option:e,index:l}}}drawCharts.call(this,n.type,n,this.config,this.context)}},uCharts.prototype.translate=function(t){this.scrollOption={currentOffset:t,startTouchX:t,distance:0,lastMoveTime:0};let e=assign({},this.opts,{_scrollDistance_:t,animation:!1});drawCharts.call(this,this.opts.type,e,this.config,this.context)},uCharts.prototype.scrollStart=function(t){var e=null;e=t.changedTouches?t.changedTouches[0]:t.mp.changedTouches[0];var i=getTouches(e,this.opts,t);e&&!0===this.opts.enableScroll&&(this.scrollOption.startTouchX=i.x)},uCharts.prototype.scroll=function(t){0===this.scrollOption.lastMoveTime&&(this.scrollOption.lastMoveTime=Date.now());let e=this.opts.touchMoveLimit||60,i=Date.now(),a=i-this.scrollOption.lastMoveTime;if(!(a<Math.floor(1e3/e))&&0!=this.scrollOption.startTouchX){this.scrollOption.lastMoveTime=i;var o=null;if(o=t.changedTouches?t.changedTouches[0]:t.mp.changedTouches[0],o&&!0===this.opts.enableScroll){var n,r=getTouches(o,this.opts,t);n=r.x-this.scrollOption.startTouchX;var l=this.scrollOption.currentOffset,s=calValidDistance(this,l+n,this.opts.chartData,this.config,this.opts);this.scrollOption.distance=n=s-l;var x=assign({},this.opts,{_scrollDistance_:l+n,animation:!1});return this.opts=x,drawCharts.call(this,x.type,x,this.config,this.context),l+n}}},uCharts.prototype.scrollEnd=function(){if(!0===this.opts.enableScroll){var t=this.scrollOption,e=t.currentOffset,i=t.distance;this.scrollOption.currentOffset=e+i,this.scrollOption.distance=0,this.scrollOption.moveCount=0}};export default uCharts;